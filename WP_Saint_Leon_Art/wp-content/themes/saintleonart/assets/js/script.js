;(function(){'use strict';var pageTitle=document.head.getElementsByTagName('title')[0].innerText;if(pageTitle==='Bienvenue - Saint-Léon\'Art'){var timeToLaunch=function timeToLaunch(){var currentDate=new Date();var diff=(currentDate-targetDate)/1000;var diff=Math.abs(Math.floor(diff));days=Math.floor(diff/(24*60*60));sec=diff-days*24*60*60;hrs=Math.floor(sec/(60*60));sec=sec-hrs*60*60;min=Math.floor(sec/60);sec=sec-min*60;};var countDownTimer=function countDownTimer(){timeToLaunch();$("#days .number").text(days);$("#hours .number").text(hrs);$("#minutes .number").text(min);setTimeout(countDownTimer,1000);};var numberTransition=function numberTransition(id,endPoint,transitionDuration,transitionEase){$({numberCount:$(id).text()}).animate({numberCount:endPoint},{duration:transitionDuration,easing:transitionEase,step:function step(){$(id).text(Math.floor(this.numberCount));},complete:function complete(){$(id).text(this.numberCount);}});};var targetDate=new Date("2018/08/19 18:00:00");var days;var hrs;var min;var sec;$(function(){timeToLaunch();numberTransition('#days .number',days,1000,'easeOutQuad');numberTransition('#hours .number',hrs,1000,'easeOutQuad');numberTransition('#minutes .number',min,1000,'easeOutQuad');setTimeout(countDownTimer,1001);});;}var hamburger=document.querySelector('.hamburger');var sidebarOpened=false;function openMenu(){document.body.classList.add('has-sidebar');hamburger.classList.add('is-active');sidebarOpened=true;return;}function closeMenu(){document.body.classList.remove('has-sidebar');hamburger.classList.remove('is-active');sidebarOpened=false;return;}hamburger.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();if(!sidebarOpened){openMenu();}else{closeMenu();}});document.body.addEventListener('click',function(){if(sidebarOpened){document.body.classList.remove('has-sidebar');hamburger.classList.remove('is-active');sidebarOpened=false;return;}});if(pageTitle===' » Programme - Saint-Léon\'Art'){var fActive=function fActive(e){e.stopPropagation();if(document.querySelector('.program__navigation .day a.active')){document.querySelector('.program__navigation .day a.active').classList.remove('active');document.querySelector('.program .timeline.all#all').classList.remove('here');}e.currentTarget.classList.add('active');};var buttons=document.querySelectorAll('.program__navigation .day a');;Array.from(buttons).forEach(function($btn){$btn.addEventListener("click",fActive);});}if(pageTitle===' » À propos - Saint-Léon\'Art'){var fCancelAnchor=function fCancelAnchor(e){e.preventDefault();};var bullets=document.querySelectorAll('.bullets_nav');var translateValue;Array.from(bullets).forEach(function($btn){$btn.addEventListener("click",fCancelAnchor);$btn.addEventListener('click',function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$btn.getAttribute('data-translateValue-mobile');}else{var translateValue=$btn.getAttribute('data-translateValue-desktop');}if($btn.parentNode.querySelector('.active')){$btn.parentNode.querySelector('.active').classList.remove('active');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';$btn.classList.add('active');if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$btn.getAttribute('data-prec-img')].classList.toggle('precNext');img[$btn.getAttribute('data-next-img')].classList.toggle('precNext');});});var prevNext=document.querySelectorAll('.prevNext div button');Array.from(prevNext).forEach(function($prevNext){$prevNext.addEventListener("click",fCancelAnchor);$prevNext.addEventListener("click",function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$prevNext.getAttribute('data-translateValue-mobile');}else{var translateValue=$prevNext.getAttribute('data-translateValue-desktop');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';var prevNextParent=$prevNext.parentNode.parentNode;prevNextParent.childNodes[$prevNext.getAttribute('data-next')].style.visibility='visible';prevNextParent.childNodes[$prevNext.getAttribute('data-prec')].style.visibility='hidden';if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$prevNext.getAttribute('data-prec-img')].classList.toggle('precNext');img[$prevNext.getAttribute('data-next-img')].classList.toggle('precNext');var btnA=document.querySelectorAll('.bullets_nav');var btn=document.querySelector('.bullets_nav');if(document.querySelector('.bullets .active')){document.querySelector('.bullets .active').classList.remove('active');}btnA[$prevNext.getAttribute('data-focus')].classList.add('active');});$;});var img=document.querySelectorAll('.slider div');$('.count').each(function(){$(this).prop('Counter',0).animate({Counter:$(this).text()},{duration:4000,easing:'swing',step:function step(now){$(this).text(Math.ceil(now));}});});}var fAnimInput=function fAnimInput(){var input=document.querySelectorAll('.input');var getFocus=function getFocus(oEvent){oEvent.currentTarget.parentNode.querySelector('label').classList.add("focus");var oInput=oEvent.currentTarget.parentNode.querySelector('.input');setTimeout(function(){oInput.classList.add("border");},200);};var outFocus=function outFocus(e){if(e.currentTarget.parentNode.querySelector('.input').value.length===0){e.currentTarget.parentNode.querySelector('label').classList.remove("focus");}e.currentTarget.classList.remove("border");};Array.from(input).forEach(function($label){$label.addEventListener("focus",getFocus);$label.addEventListener("click",getFocus);$label.addEventListener("blur",outFocus);if($label.value!=""){$label.parentNode.querySelector('label').classList.add("focus");}});};fAnimInput();if(pageTitle===' » Tous les artistes - Saint-Léon\'Art'){jQuery(function($){$('#filter').submit(function(){var filter=$('#filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.artist__container').html(data);console.log(data);}});return false;});});}if(pageTitle===' » Tous les événements - Saint-Léon\'Art'){jQuery(function($){$('#event_filter').submit(function(){var filter=$('#event_filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.event__container').html(data);console.log(data);}});return false;});});}if(pageTitle===' » Actualités - Saint-Léon\'Art'){jQuery(function($){$('#news_filter').submit(function(){var filter=$('#news_filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.event__container').html(data);console.log(data);}});return false;});});}if(window.matchMedia("(min-width: 980px)").matches){var fAddLogoMenu=function fAnimMenu(){var menu=document.querySelector('ul.menu');var li=document.createElement("li");var span=document.createElement('span');var sheet=window.document.styleSheets[0];var midle=menu.childNodes[7];li.appendChild(span);span.appendChild(document.createTextNode("SaintLeon'Art"));menu.insertBefore(li,midle.nextSibling);li.classList.add('menu__item');li.classList.add('logo');span.classList.add('logo');menu.classList.add('onScroll');sheet.insertRule('.header {padding-top: 0px;}',sheet.cssRules.length);};var fRemoveLogoMenu=function fRemoveLogoMenu(e){var sheet=window.document.styleSheets[0];var menu=document.querySelector('ul.menu');var logo=menu.querySelector('.menu__item.logo');menu.classList.remove('onScroll');menu.removeChild(logo);sheet.insertRule('.header {padding-top: 24px;}',sheet.cssRules.length);};var AnimMenu=function(){var executed=false;var actionDo=false;return function(e){if(!executed){if(window.pageYOffset>10){executed=true;actionDo=true;fAddLogoMenu();}}if(actionDo&&executed){if(window.pageYOffset<10){actionDo=false;executed=false;fRemoveLogoMenu();}}};}();window.addEventListener('scroll',AnimMenu);window.addEventListener('load',AnimMenu);}if(pageTitle===' » Newsletter - Saint-Léon\'Art'){var PathLoader=function PathLoader(el){this.el=el;this.strokeLength=el.getTotalLength();this.el.style.strokeDasharray=this.el.style.strokeDashoffset=this.strokeLength;};PathLoader.prototype._draw=function(val){this.el.style.strokeDashoffset=this.strokeLength*(1-val);};PathLoader.prototype.setProgress=function(val,cb){this._draw(val);if(cb&&typeof cb==='function')cb();};PathLoader.prototype.setProgressFn=function(fn){if(typeof fn==='function')fn(this);};var body=document.body,svg=document.querySelector('svg path');if(svg!==null){svg=new PathLoader(svg);setTimeout(function(){document.body.classList.add('active');svg.setProgress(1);},200);}}$('.search-button').click(function(){$(this).parent().toggleClass('open');});})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJwYWdlVGl0bGUiLCJkb2N1bWVudCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlubmVyVGV4dCIsInRpbWVUb0xhdW5jaCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRpZmYiLCJ0YXJnZXREYXRlIiwiTWF0aCIsImFicyIsImZsb29yIiwiZGF5cyIsInNlYyIsImhycyIsIm1pbiIsImNvdW50RG93blRpbWVyIiwiJCIsInRleHQiLCJzZXRUaW1lb3V0IiwibnVtYmVyVHJhbnNpdGlvbiIsImlkIiwiZW5kUG9pbnQiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uRWFzZSIsIm51bWJlckNvdW50IiwiYW5pbWF0ZSIsImR1cmF0aW9uIiwiZWFzaW5nIiwic3RlcCIsImNvbXBsZXRlIiwiaGFtYnVyZ2VyIiwicXVlcnlTZWxlY3RvciIsInNpZGViYXJPcGVuZWQiLCJvcGVuTWVudSIsImJvZHkiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZU1lbnUiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZkFjdGl2ZSIsImN1cnJlbnRUYXJnZXQiLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCIkYnRuIiwiZkNhbmNlbEFuY2hvciIsImJ1bGxldHMiLCJ0cmFuc2xhdGVWYWx1ZSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZ2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaW1nIiwidG9nZ2xlIiwicHJldk5leHQiLCIkcHJldk5leHQiLCJwcmV2TmV4dFBhcmVudCIsImNoaWxkTm9kZXMiLCJ2aXNpYmlsaXR5IiwiYnRuQSIsImJ0biIsImVhY2giLCJwcm9wIiwiQ291bnRlciIsIm5vdyIsImNlaWwiLCJmQW5pbUlucHV0IiwiaW5wdXQiLCJnZXRGb2N1cyIsIm9FdmVudCIsIm9JbnB1dCIsIm91dEZvY3VzIiwidmFsdWUiLCJsZW5ndGgiLCIkbGFiZWwiLCJqUXVlcnkiLCJzdWJtaXQiLCJmaWx0ZXIiLCJhamF4IiwidXJsIiwiYXR0ciIsImRhdGEiLCJzZXJpYWxpemUiLCJ0eXBlIiwic3VjY2VzcyIsImh0bWwiLCJjb25zb2xlIiwibG9nIiwiZkFkZExvZ29NZW51IiwiZkFuaW1NZW51IiwibWVudSIsImxpIiwiY3JlYXRlRWxlbWVudCIsInNwYW4iLCJzaGVldCIsInN0eWxlU2hlZXRzIiwibWlkbGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJpbnNlcnRSdWxlIiwiY3NzUnVsZXMiLCJmUmVtb3ZlTG9nb01lbnUiLCJsb2dvIiwicmVtb3ZlQ2hpbGQiLCJBbmltTWVudSIsImV4ZWN1dGVkIiwiYWN0aW9uRG8iLCJwYWdlWU9mZnNldCIsIlBhdGhMb2FkZXIiLCJlbCIsInN0cm9rZUxlbmd0aCIsImdldFRvdGFsTGVuZ3RoIiwic3Ryb2tlRGFzaGFycmF5Iiwic3Ryb2tlRGFzaG9mZnNldCIsInByb3RvdHlwZSIsIl9kcmF3IiwidmFsIiwic2V0UHJvZ3Jlc3MiLCJjYiIsInNldFByb2dyZXNzRm4iLCJmbiIsInN2ZyIsImNsaWNrIiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiXSwibWFwcGluZ3MiOiIwQkFDQSxHQUFNQSxXQUFZQyxTQUFTQyxJQUFULENBQWNDLG9CQUFkLENBQW1DLE9BQW5DLEVBQTRDLENBQTVDLEVBQStDQyxTQUFqRSxDQUVBLEdBQUlKLFlBQWMsNkJBQWxCLENBQWlELElBK0JwQ0ssYUEvQm9DLENBK0I3QyxRQUFTQSxhQUFULEVBQXdCLENBRXBCLEdBQUlDLGFBQWMsR0FBSUMsS0FBSixFQUFsQixDQUdBLEdBQUlDLE1BQU8sQ0FBQ0YsWUFBY0csVUFBZixFQUE2QixJQUF4QyxDQUNBLEdBQUlELE1BQU9FLEtBQUtDLEdBQUws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QSxLQUN2QyxDQUhELENBS0FWLFdBQVdNLFNBQVgsQ0FBcUJLLGFBQXJCLENBQXFDLFNBQVVDLEVBQVYsQ0FBYyxDQUMvQyxHQUFJLE1BQU9BLEdBQVAsR0FBYyxVQUFsQixDQUE4QkEsR0FBRyxJQUFILEVBQ2pDLENBRkQsQ0FJQSxHQUFJakcsTUFBT25DLFNBQVNtQyxJQUFwQixDQUNJa0csSUFBTXJJLFNBQVNnQyxhQUFULENBQXVCLFVBQXZCLENBRFYsQ0FHQSxHQUFJcUcsTUFBUSxJQUFaLENBQWtCLENBQ2RBLElBQU0sR0FBSWIsV0FBSixDQUFlYSxHQUFmLENBQU4sQ0FFQWxILFdBQVcsVUFBWSxDQUNuQm5CLFNBQVNtQyxJQUFULENBQWNDLFNBQWQsQ0FBd0JDLEdBQXhCLENBQTRCLFFBQTVCLEVBQ0FnRyxJQUFJSixXQUFKLENBQWdCLENBQWhCLEVBQ0gsQ0FIRCxDQUdHLEdBSEgsRUFJSCxDQUNKLENBRURoSCxFQUFFLGdCQUFGLEVBQW9CcUgsS0FBcEIsQ0FBMEIsVUFBWSxDQUNsQ3JILEVBQUUsSUFBRixFQUFRc0gsTUFBUixHQUFpQkMsV0FBakIsQ0FBNkIsTUFBN0IsRUFDSCxDQUZELEUiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IHBhZ2VUaXRsZSA9IGRvY3VtZW50LmhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RpdGxlJylbMF0uaW5uZXJUZXh0O1xyXG5cclxuaWYgKHBhZ2VUaXRsZSA9PT0gJ0JpZW52ZW51ZSAtIFNhaW50LUzDqW9uXFwnQXJ0JyApe1xyXG5cclxuICAgIC8vIENvdW50ZG93biBob21lIHBhZ2VcclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIC8vIFRoZSBkYXRlIHlvdSB3YW50IHRvIGNvdW50IGRvd24gdG9cclxuICAgIHZhciB0YXJnZXREYXRlID0gbmV3IERhdGUoXCIyMDE4LzA4LzE5IDE4OjAwOjAwXCIpO1xyXG5cclxuICAgIC8vIE90aGVyIGRhdGUgcmVsYXRlZCB2YXJpYWJsZXNcclxuICAgIHZhciBkYXlzO1xyXG4gICAgdmFyIGhycztcclxuICAgIHZhciBtaW47XHJcbiAgICB2YXIgc2VjO1xyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAqIE9OIERPQ1VNRU5UIExPQURcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aW1lIHVudGlsIGxhdW5jaCBkYXRlXHJcbiAgICAgICAgdGltZVRvTGF1bmNoKCk7XHJcbiAgICAgICAgLy8gVHJhbnNpdGlvbiB0aGUgY3VycmVudCBjb3VudGRvd24gZnJvbSAwIFxyXG4gICAgICAgIG51bWJlclRyYW5zaXRpb24oJyNkYXlzIC5udW1iZXInLCBkYXlzLCAxMDAwLCAnZWFzZU91dFF1YWQnKTtcclxuICAgICAgICBudW1iZXJUcmFuc2l0aW9uKCcjaG91cnMgLm51bWJlcicsIGhycywgMTAwMCwgJ2Vhc2VPdXRRdWFkJyk7XHJcbiAgICAgICAgbnVtYmVyVHJhbnNpdGlvbignI21pbnV0ZXMgLm51bWJlcicsIG1pbiwgMTAwMCwgJ2Vhc2VPdXRRdWFkJyk7XHJcbiAgICAgICAgLy8gQmVnaW4gQ291bnRkb3duXHJcbiAgICAgICAgc2V0VGltZW91dChjb3VudERvd25UaW1lciwgMTAwMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgKiBGSUdVUkUgT1VUIFRIRSBBTU9VTlQgT0YgXHJcbiAgICBUSU1FIExFRlQgQkVGT1JFIExBVU5DSFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZnVuY3Rpb24gdGltZVRvTGF1bmNoKCkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBkYXRlXHJcbiAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGRhdGVzXHJcbiAgICAgICAgdmFyIGRpZmYgPSAoY3VycmVudERhdGUgLSB0YXJnZXREYXRlKSAvIDEwMDA7XHJcbiAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmFicyhNYXRoLmZsb29yKGRpZmYpKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgbnVtYmVyIG9mIGRheXMgdW50aWwgdGFyZ2V0XHJcbiAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IoZGlmZiAvICgyNCAqIDYwICogNjApKTtcclxuICAgICAgICBzZWMgPSBkaWZmIC0gZGF5cyAqIDI0ICogNjAgKiA2MDtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgbnVtYmVyIG9mIGhvdXJzIHVudGlsIHRhcmdldFxyXG4gICAgICAgIGhycyA9IE1hdGguZmxvb3Ioc2VjIC8gKDYwICogNjApKTtcclxuICAgICAgICBzZWMgPSBzZWMgLSBocnMgKiA2MCAqIDYwO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBudW1iZXIgb2YgbWludXRlcyB1bnRpbCB0YXJnZXRcclxuICAgICAgICBtaW4gPSBNYXRoLmZsb29yKHNlYyAvICg2MCkpO1xyXG4gICAgICAgIHNlYyA9IHNlYyAtIG1pbiAqIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAqIERJU1BMQVkgVEhFIENVUlJFTlQgXHJcbiAgICBDT1VOVCBUTyBMQVVOQ0hcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIGZ1bmN0aW9uIGNvdW50RG93blRpbWVyKCkge1xyXG5cclxuICAgICAgICAvLyBGaWd1cmUgb3V0IHRoZSB0aW1lIHRvIGxhdW5jaFxyXG4gICAgICAgIHRpbWVUb0xhdW5jaCgpO1xyXG5cclxuICAgICAgICAvLyBXcml0ZSB0byBjb3VudGRvd24gY29tcG9uZW50XHJcbiAgICAgICAgJChcIiNkYXlzIC5udW1iZXJcIikudGV4dChkYXlzKTtcclxuICAgICAgICAkKFwiI2hvdXJzIC5udW1iZXJcIikudGV4dChocnMpO1xyXG4gICAgICAgICQoXCIjbWludXRlcyAubnVtYmVyXCIpLnRleHQobWluKTtcclxuXHJcbiAgICAgICAgLy8gUmVwZWF0IHRoZSBjaGVjayBldmVyeSBzZWNvbmRcclxuICAgICAgICBzZXRUaW1lb3V0KGNvdW50RG93blRpbWVyLCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgKiBUUkFOU0lUSU9OIE5VTUJFUlMgRlJPTSAwXHJcbiAgICBUTyBDVVJSRU5UIFRJTUUgVU5USUwgTEFVTkNIXHJcbiAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICBmdW5jdGlvbiBudW1iZXJUcmFuc2l0aW9uKGlkLCBlbmRQb2ludCwgdHJhbnNpdGlvbkR1cmF0aW9uLCB0cmFuc2l0aW9uRWFzZSkge1xyXG4gICAgICAgIC8vIFRyYW5zaXRpb24gbnVtYmVycyBmcm9tIDAgdG8gdGhlIGZpbmFsIG51bWJlclxyXG4gICAgICAgICQoeyBudW1iZXJDb3VudDogJChpZCkudGV4dCgpIH0pLmFuaW1hdGUoeyBudW1iZXJDb3VudDogZW5kUG9pbnQgfSwge1xyXG4gICAgICAgICAgICBkdXJhdGlvbjogdHJhbnNpdGlvbkR1cmF0aW9uLFxyXG4gICAgICAgICAgICBlYXNpbmc6IHRyYW5zaXRpb25FYXNlLFxyXG4gICAgICAgICAgICBzdGVwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKGlkKS50ZXh0KE1hdGguZmxvb3IodGhpcy5udW1iZXJDb3VudCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJChpZCkudGV4dCh0aGlzLm51bWJlckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBIYW1idXJnZXIgbWVudSBhbmQgc2lkZWJhclxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICBjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XHJcbiAgICAvLyBjb25zdCBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWljb24nKVxyXG4gICAgbGV0IHNpZGViYXJPcGVuZWQgPSBmYWxzZVxyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5NZW51KCl7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoYXMtc2lkZWJhcicpXHJcbiAgICAgICAgaGFtYnVyZ2VyLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgc2lkZWJhck9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlTWVudSgpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy1zaWRlYmFyJylcclxuICAgICAgICBoYW1idXJnZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJylcclxuICAgICAgICBzaWRlYmFyT3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBpZiAoIXNpZGViYXJPcGVuZWQpIHtcclxuICAgICAgICAgICAgb3Blbk1lbnUoKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjbG9zZU1lbnUoKVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2lkZWJhck9wZW5lZCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy1zaWRlYmFyJylcclxuICAgICAgICAgICAgaGFtYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgICAgIHNpZGViYXJPcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIC8vICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAvLyAgICAgc2VhcmNoLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKVxyXG4gICAgLy8gICAgIHNlYXJjaC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICAgIC8vICAgICBzZWFyY2gucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICAgIC8vIH0pO1xyXG5cclxuaWYgKHBhZ2VUaXRsZSA9PT0gJyDCuyBQcm9ncmFtbWUgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgLy8gRXZlbnQgbWVudVxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZ3JhbV9fbmF2aWdhdGlvbiAuZGF5IGEnKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZkFjdGl2ZShlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZ3JhbV9fbmF2aWdhdGlvbiAuZGF5IGEuYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmFtX19uYXZpZ2F0aW9uIC5kYXkgYS5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmFtIC50aW1lbGluZS5hbGwjYWxsJykuY2xhc3NMaXN0LnJlbW92ZSgnaGVyZScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQXJyYXkuZnJvbShidXR0b25zKS5mb3JFYWNoKGZ1bmN0aW9uKCRidG4pIHtcclxuICAgICAgICAgICAgJGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZkFjdGl2ZSk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuLy8gaWYgKHBhZ2VUaXRsZSA9PT0gJyDCuyBQYWdlIGNvbnRhY3QgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4vLyAgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyAgICAgLy8gRm9ybSBjb250YWN0IGZlZWRiYWNrIGFuZCBmb2N1c1xyXG4vLyAgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyAgICAgICAgIHZhciBmQ2hlY2tGb3JtID0gZnVuY3Rpb24gZkNoZWNrRm9ybSgpIHtcclxuLy8gICAgICAgICAgICAgdmFyICRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybS5jb250YWN0Jyk7XHJcbi8vICAgICAgICAgICAgIHZhciAkU3ViamVjdEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YmplY3QnKTtcclxuLy8gICAgICAgICAgICAgdmFyICRMYXN0TmFtZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZScpO1xyXG4vLyAgICAgICAgICAgICB2YXIgJEVtYWlsRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKTtcclxuLy8gICAgICAgICAgICAgdmFyICRNc2dGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlJyk7XHJcbi8vICAgICAgICAgICAgIHZhciAkU3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5idG4tLWFuaW0nKTtcclxuLy8gICAgICAgICAgICAgdmFyIHJlZ2V4cE5hbWUgPSAvXlthLXpBLVpcXHUwMEMwLVxcdTAwRkZdK1snLV0/W2EtekEtWlxcdTAwQzAtXFx1MDBGRl0rJC87XHJcbi8vICAgICAgICAgICAgIHZhciByZWdleHBFbWFpbCA9IC9eKFthLXowLTlfXFwuLV0rKUAoW1xcZGEtelxcLi1dKylcXC4oW2EtelxcLl17Miw2fSkkLztcclxuLy8gICAgICAgICAgICAgdmFyIHJlZ2V4cE1zZyA9IC9eKFthLXpBLVpdezIsNDB9ICsgW2EtekEtWl17Miw0MH0pJC87XHJcbi8vICAgICAgICAgICAgIHZhciBmQ2hlY2tBRmllbGQgPSBmdW5jdGlvbiBmQ2hlY2tBRmllbGQoZmllbGQsIHJlZ2V4cCkge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlID09ICcnKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJWb3RyZSBjaGFtcHMgZGUgZm9ybXVsYWlyZSBlc3QgdmlkZS5cIjtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuLy8gICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnZXhwICYmICFyZWdleHAudGVzdChmaWVsZC52YWx1ZSkpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIklsIHNlbWJsZSBxdWUgbGEgdmFsZXVyIHJlbnRyw6kgYWl0IHVuIHByb2Jsw6htZS5cIjtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuLy8gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJFN1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ29rJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgIHZhciBmQ2hlY2tGaXJzdE5hbWUgPSBmdW5jdGlvbiBmQ2hlY2tGaXJzdE5hbWUoKSB7XHJcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gZkNoZWNrQUZpZWxkKCRTdWJqZWN0RmllbGQsIHJlZ2V4cE5hbWUpO1xyXG4vLyAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICB2YXIgZkNoZWNrTGFzdE5hbWUgPSBmdW5jdGlvbiBmQ2hlY2tMYXN0TmFtZSgpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiBmQ2hlY2tBRmllbGQoJExhc3ROYW1lRmllbGQsIHJlZ2V4cE5hbWUpO1xyXG4vLyAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICB2YXIgZkNoZWNrRW1haWwgPSBmdW5jdGlvbiBmQ2hlY2tFbWFpbCgpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiBmQ2hlY2tBRmllbGQoJEVtYWlsRmllbGQsIHJlZ2V4cEVtYWlsKTtcclxuLy8gICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgdmFyIGZDaGVja01lc3NhZ2UgPSBmdW5jdGlvbiBmQ2hlY2tNZXNzYWdlKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKCRNc2dGaWVsZC52YWx1ZS5zcGxpdCgvXFxzKy8pLmxlbmd0aCA+PSAzKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnb2snKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIGlmICgkTXNnRmllbGQudmFsdWUuc3BsaXQoL1xccysvKS5sZW5ndGggPT09IDEpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJWb3VzIG4nYXZleiBwYXMgw6ljcml0IGRlIG1lc3NhZ2UuXCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgaWYgKCRNc2dGaWVsZC52YWx1ZS5zcGxpdCgvXFxzKy8pLmxlbmd0aCA8IDUpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJWb3VzIGF2ZXogcGFzIMOpY3JpcyB1biBhc3NleiBncmFuZCBtZXNzYWdlLlwiO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgdmFyIGZDaGVja0FsbCA9IGZ1bmN0aW9uIGZDaGVja0FsbCgpIHtcclxuLy8gICAgICAgICAgICAgICAgIGlmIChmQ2hlY2tGaXJzdE5hbWUoKSAqIGZDaGVja0xhc3ROYW1lKCkgKiBmQ2hlY2tFbWFpbCgpICogZkNoZWNrTWVzc2FnZSgpICkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICRGb3JtLmNsYXNzTGlzdC5hZGQoJ3ZhbGlkJyk7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIH07XHJcblxyXG4vLyAgICAgICAgICAgICAkU3ViamVjdEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmQ2hlY2tGaXJzdE5hbWUsIGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgJExhc3ROYW1lRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja0xhc3ROYW1lLCBmYWxzZSk7XHJcbi8vICAgICAgICAgICAgICRFbWFpbEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmQ2hlY2tFbWFpbCwgZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAkTXNnRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja01lc3NhZ2UsIGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgJFN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZDaGVja0FsbCwgZmFsc2UpO1xyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICAgICAgZkNoZWNrRm9ybSgpO1xyXG4vL31cclxuaWYgKHBhZ2VUaXRsZSA9PT0gJyDCuyDDgCBwcm9wb3MgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgLy8gSlMgU2xpZGVyXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICBjb25zdCBmQ2FuY2VsQW5jaG9yID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBidWxsZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1bGxldHNfbmF2Jyk7XHJcbiAgICB2YXIgdHJhbnNsYXRlVmFsdWU7XHJcbiAgICBBcnJheS5mcm9tKGJ1bGxldHMpLmZvckVhY2goZnVuY3Rpb24gKCRidG4pIHtcclxuICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQ2FuY2VsQW5jaG9yKTtcclxuXHJcblxyXG4gICAgICAgICRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3MzlweClcIikubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlID0gJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGVWYWx1ZS1kZXNrdG9wJyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY2xhc3MgYWN0aXZlIGZyb20gcHJlYyBmb2N1c1xyXG4gICAgICAgICAgICBpZiAoJGJ0bi5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgJGJ0bi5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSB0cmFuc2xhdGVYIGFuaW1hdGlvbiBvZiBzbGlkZXJcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhbnNsYXRlVmFsdWV9KWA7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgY2xhc3MgYWN0aXZlIGZyb20gYWN0dWFsIGZvY3VzXHJcbiAgICAgICAgICAgICRidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGFuZ2Ugb3BhY2l0eSBvZiBwcmVjL25leHQgaW1hZ2VcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JykpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWdbJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJlYy1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgaW1nWyRidG4uZ2V0QXR0cmlidXRlKCdkYXRhLW5leHQtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwcmV2TmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmV2TmV4dCBkaXYgYnV0dG9uJyk7XHJcblxyXG4gICAgQXJyYXkuZnJvbShwcmV2TmV4dCkuZm9yRWFjaChmdW5jdGlvbiAoJHByZXZOZXh0KSB7XHJcbiAgICAgICAgJHByZXZOZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQ2FuY2VsQW5jaG9yKTtcclxuXHJcblxyXG4gICAgICAgICRwcmV2TmV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNzM5cHgpXCIpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZVZhbHVlLWRlc2t0b3AnKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTWFrZSB0cmFuc2xhdGVYIGFuaW1hdGlvbiBvZiBzbGlkZXJcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhbnNsYXRlVmFsdWV9KWA7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdmFyaWFibGUgZm9yIHRoZSBwYXJlbnRcclxuICAgICAgICAgICAgY29uc3QgcHJldk5leHRQYXJlbnQgPSAkcHJldk5leHQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHZpc2libGUvaGlkZGVuIHN0eWxlIGZvciB0aGUgbmV4dFByZWMgYnV0dG9uXHJcbiAgICAgICAgICAgIHByZXZOZXh0UGFyZW50LmNoaWxkTm9kZXNbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1uZXh0JyldLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgIHByZXZOZXh0UGFyZW50LmNoaWxkTm9kZXNbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcmVjJyldLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBvcGFjaXR5IG9mIHByZWMvbmV4dCBpbWFnZVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltZ1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXByZWMtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgICAgIGltZ1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLW5leHQtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY2xhc3MgYWN0aXZlIGZyb20gYnVsbGV0cyBwcmVjIGZvY3VzXHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bkEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnVsbGV0c19uYXYnKTtcclxuICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1bGxldHNfbmF2Jyk7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVsbGV0cyAuYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWxsZXRzIC5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGNsYXNzIGFjdGl2ZSBmcm9tIGFjdHVhbCBmb2N1c1xyXG4gICAgICAgICAgICBidG5BWyRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMnKV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgZGl2Jyk7XHJcblxyXG4gICAgJCgnLmNvdW50JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wcm9wKCdDb3VudGVyJywgMCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIENvdW50ZXI6ICQodGhpcykudGV4dCgpXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdzd2luZycsXHJcbiAgICAgICAgICAgICAgICBzdGVwOiBmdW5jdGlvbiAobm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KE1hdGguY2VpbChub3cpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIElucHV0IEFuaW1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgdmFyIGZBbmltSW5wdXQgPSBmdW5jdGlvbiBmQW5pbUlucHV0KCkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCcpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0Rm9jdXMgPSBmdW5jdGlvbiBnZXRGb2N1cyhvRXZlbnQpIHtcclxuICAgICAgICAgICAgb0V2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgdmFyIG9JbnB1dCA9ICBvRXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBvSW5wdXQuY2xhc3NMaXN0LmFkZChcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSwyMDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb3V0Rm9jdXMgPSBmdW5jdGlvbiBvdXRGb2N1cyhlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS52YWx1ZS5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuICAgICAgICBBcnJheS5mcm9tKGlucHV0KS5mb3JFYWNoKGZ1bmN0aW9uKCRsYWJlbCkge1xyXG4gICAgICAgICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGdldEZvY3VzKTtcclxuICAgICAgICAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRGb2N1cyk7XHJcbiAgICAgICAgICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvdXRGb2N1cyk7XHJcbiAgICAgICAgICAgIGlmKCRsYWJlbC52YWx1ZSAhPSBcIlwiKXtcclxuICAgICAgICAgICAgICAgICRsYWJlbC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuY2xhc3NMaXN0LmFkZChcImZvY3VzXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmQW5pbUlucHV0KCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIFRheG9ub215IEZpbHRlciBhbmQgcGFnaW5hdGlvblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmlmIChwYWdlVGl0bGUgPT09ICcgwrsgVG91cyBsZXMgYXJ0aXN0ZXMgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgJCgnI2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZpbHRlci5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlci5zZXJpYWxpemUoKSwgLy8gZm9ybSBkYXRhXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWx0ZXIuYXR0cignbWV0aG9kJyksIC8vIFBPU1RcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFydGlzdF9fY29udGFpbmVyJykuaHRtbChkYXRhKTsgLy8gaW5zZXJ0IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5pZiAocGFnZVRpdGxlID09PSAnIMK7IFRvdXMgbGVzIMOpdsOpbmVtZW50cyAtIFNhaW50LUzDqW9uXFwnQXJ0Jykge1xyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgJCgnI2V2ZW50X2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjZXZlbnRfZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZpbHRlci5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlci5zZXJpYWxpemUoKSwgLy8gZm9ybSBkYXRhXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWx0ZXIuYXR0cignbWV0aG9kJyksIC8vIFBPU1RcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmV2ZW50X19jb250YWluZXInKS5odG1sKGRhdGEpOyAvLyBpbnNlcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmlmIChwYWdlVGl0bGUgPT09ICcgwrsgQWN0dWFsaXTDqXMgLSBTYWludC1Mw6lvblxcJ0FydCcpIHtcclxuICAgIGpRdWVyeShmdW5jdGlvbiAoJCkge1xyXG4gICAgICAgICQoJyNuZXdzX2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjbmV3c19maWx0ZXInKTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogZmlsdGVyLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyLnNlcmlhbGl6ZSgpLCAvLyBmb3JtIGRhdGFcclxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbHRlci5hdHRyKCdtZXRob2QnKSwgLy8gUE9TVFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZXZlbnRfX2NvbnRhaW5lcicpLmh0bWwoZGF0YSk7IC8vIGluc2VydCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIE1lbnUgYW5pbWF0aW9uIG9uIHNjcm9sbFxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5pZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA5ODBweClcIikubWF0Y2hlcykge1xyXG4gICAgdmFyIGZBZGRMb2dvTWVudSA9IGZ1bmN0aW9uIGZBbmltTWVudSgpIHtcclxuICAgICAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndWwubWVudScpO1xyXG4gICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHZhciBzaGVldCA9IHdpbmRvdy5kb2N1bWVudC5zdHlsZVNoZWV0c1swXTtcclxuICAgICAgICBjb25zdCBtaWRsZSA9IG1lbnUuY2hpbGROb2Rlc1s3XTtcclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChzcGFuKTtcclxuICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiU2FpbnRMZW9uJ0FydFwiKSk7XHJcbiAgICAgICAgbWVudS5pbnNlcnRCZWZvcmUobGksIG1pZGxlLm5leHRTaWJsaW5nKTtcclxuICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtJyk7XHJcbiAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnbG9nbycpO1xyXG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZCgnbG9nbycpO1xyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZCgnb25TY3JvbGwnKTtcclxuICAgICAgICBzaGVldC5pbnNlcnRSdWxlKCcuaGVhZGVyIHtwYWRkaW5nLXRvcDogMHB4O30nLCBzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgdmFyIGZSZW1vdmVMb2dvTWVudSA9IGZ1bmN0aW9uIGZSZW1vdmVMb2dvTWVudShlKSB7XHJcbiAgICAgICAgICAgIHZhciBzaGVldCA9IHdpbmRvdy5kb2N1bWVudC5zdHlsZVNoZWV0c1swXTtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsLm1lbnUnKTtcclxuICAgICAgICAgICAgY29uc3QgbG9nbyA9IG1lbnUucXVlcnlTZWxlY3RvcignLm1lbnVfX2l0ZW0ubG9nbycpO1xyXG4gICAgICAgICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ29uU2Nyb2xsJyk7XHJcbiAgICAgICAgICAgIG1lbnUucmVtb3ZlQ2hpbGQobG9nbyk7XHJcbiAgICAgICAgICAgIHNoZWV0Lmluc2VydFJ1bGUoJy5oZWFkZXIge3BhZGRpbmctdG9wOiAyNHB4O30nLCBzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgdmFyIEFuaW1NZW51ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXhlY3V0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgYWN0aW9uRG8gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFleGVjdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkRvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmQWRkTG9nb01lbnUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGFjdGlvbkRvICYmIGV4ZWN1dGVkKXtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkRvID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmUmVtb3ZlTG9nb01lbnUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBBbmltTWVudSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIEFuaW1NZW51KTtcclxufVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIE5ld3NsZXR0ZXIgdmFsaWRhdGlvbiBlZmZlY3RcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5pZiAocGFnZVRpdGxlID09PSAnIMK7IE5ld3NsZXR0ZXIgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4gICAgZnVuY3Rpb24gUGF0aExvYWRlcihlbCkge1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgICB0aGlzLnN0cm9rZUxlbmd0aCA9IGVsLmdldFRvdGFsTGVuZ3RoKCk7XHJcbiAgICBcclxuICAgICAgICAvLyBzZXQgZGFzaCBvZmZzZXQgdG8gMFxyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID1cclxuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gdGhpcy5zdHJva2VMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFBhdGhMb2FkZXIucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHRoaXMuc3Ryb2tlTGVuZ3RoICogKDEgLSB2YWwpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBQYXRoTG9hZGVyLnByb3RvdHlwZS5zZXRQcm9ncmVzcyA9IGZ1bmN0aW9uICh2YWwsIGNiKSB7XHJcbiAgICAgICAgdGhpcy5fZHJhdyh2YWwpO1xyXG4gICAgICAgIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIGNiKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFBhdGhMb2FkZXIucHJvdG90eXBlLnNldFByb2dyZXNzRm4gPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSBmbih0aGlzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgIHN2ZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2ZyBwYXRoJyk7XHJcbiAgICBcclxuICAgIGlmIChzdmcgIT09IG51bGwpIHtcclxuICAgICAgICBzdmcgPSBuZXcgUGF0aExvYWRlcihzdmcpO1xyXG4gICAgXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHN2Zy5zZXRQcm9ncmVzcygxKTtcclxuICAgICAgICB9LCAyMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG4kKCcuc2VhcmNoLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxufSk7Il19
