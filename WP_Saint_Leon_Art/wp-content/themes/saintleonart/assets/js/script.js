;(function(){'use strict';var pageTitle=document.head.getElementsByTagName('title')[0].innerText;if(pageTitle==='Bienvenue - Saint-Léon\'Art'){var timeToLaunch=function timeToLaunch(){var currentDate=new Date();var diff=(currentDate-targetDate)/1000;var diff=Math.abs(Math.floor(diff));days=Math.floor(diff/(24*60*60));sec=diff-days*24*60*60;hrs=Math.floor(sec/(60*60));sec=sec-hrs*60*60;min=Math.floor(sec/60);sec=sec-min*60;};var countDownTimer=function countDownTimer(){timeToLaunch();$("#days .number").text(days);$("#hours .number").text(hrs);$("#minutes .number").text(min);setTimeout(countDownTimer,1000);};var numberTransition=function numberTransition(id,endPoint,transitionDuration,transitionEase){$({numberCount:$(id).text()}).animate({numberCount:endPoint},{duration:transitionDuration,easing:transitionEase,step:function step(){$(id).text(Math.floor(this.numberCount));},complete:function complete(){$(id).text(this.numberCount);}});};var targetDate=new Date("2018/08/19 18:00:00");var days;var hrs;var min;var sec;$(function(){timeToLaunch();numberTransition('#days .number',days,1000,'easeOutQuad');numberTransition('#hours .number',hrs,1000,'easeOutQuad');numberTransition('#minutes .number',min,1000,'easeOutQuad');setTimeout(countDownTimer,1001);});;}var hamburger=document.querySelector('.hamburger');var search=document.querySelector('.search-icon');hamburger.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();hamburger.classList.toggle('is-active');document.body.classList.toggle('has-sidebar');});search.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();search.classList.toggle('open');search.parentNode.classList.toggle('open');search.parentNode.parentNode.classList.toggle('open');});if(pageTitle===' » Programme - Saint-Léon\'Art'){var fActive=function fActive(e){e.stopPropagation();if(document.querySelector('.program__navigation .day a.active')){document.querySelector('.program__navigation .day a.active').classList.remove('active');document.querySelector('.program .timeline.all#all').classList.remove('here');}e.currentTarget.classList.add('active');};var buttons=document.querySelectorAll('.program__navigation .day a');;Array.from(buttons).forEach(function($btn){$btn.addEventListener("click",fActive);});}if(pageTitle===' » À propos - Saint-Léon\'Art'){var fCancelAnchor=function fCancelAnchor(e){e.preventDefault();};var bullets=document.querySelectorAll('.bullets_nav');var translateValue;Array.from(bullets).forEach(function($btn){$btn.addEventListener("click",fCancelAnchor);$btn.addEventListener('click',function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$btn.getAttribute('data-translateValue-mobile');}else{var translateValue=$btn.getAttribute('data-translateValue-desktop');}if($btn.parentNode.querySelector('.active')){$btn.parentNode.querySelector('.active').classList.remove('active');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';$btn.classList.add('active');if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$btn.getAttribute('data-prec-img')].classList.toggle('precNext');img[$btn.getAttribute('data-next-img')].classList.toggle('precNext');});});var prevNext=document.querySelectorAll('.prevNext div button');Array.from(prevNext).forEach(function($prevNext){$prevNext.addEventListener("click",fCancelAnchor);$prevNext.addEventListener("click",function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$prevNext.getAttribute('data-translateValue-mobile');}else{var translateValue=$prevNext.getAttribute('data-translateValue-desktop');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';var prevNextParent=$prevNext.parentNode.parentNode;prevNextParent.childNodes[$prevNext.getAttribute('data-next')].style.visibility='visible';prevNextParent.childNodes[$prevNext.getAttribute('data-prec')].style.visibility='hidden';if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$prevNext.getAttribute('data-prec-img')].classList.toggle('precNext');img[$prevNext.getAttribute('data-next-img')].classList.toggle('precNext');var btnA=document.querySelectorAll('.bullets_nav');var btn=document.querySelector('.bullets_nav');if(document.querySelector('.bullets .active')){document.querySelector('.bullets .active').classList.remove('active');}btnA[$prevNext.getAttribute('data-focus')].classList.add('active');});});var img=document.querySelectorAll('.slider div');$('.count').each(function(){$(this).prop('Counter',0).animate({Counter:$(this).text()},{duration:4000,easing:'swing',step:function step(now){$(this).text(Math.ceil(now));}});});}var fAnimInput=function fAnimInput(){var input=document.querySelectorAll('.input');var getFocus=function getFocus(oEvent){oEvent.currentTarget.parentNode.querySelector('label').classList.add("focus");var oInput=oEvent.currentTarget.parentNode.querySelector('.input');setTimeout(function(){oInput.classList.add("border");},200);};var outFocus=function outFocus(e){if(e.currentTarget.parentNode.querySelector('.input').value.length===0){e.currentTarget.parentNode.querySelector('label').classList.remove("focus");}e.currentTarget.classList.remove("border");};Array.from(input).forEach(function($label){$label.addEventListener("focus",getFocus);$label.addEventListener("click",getFocus);$label.addEventListener("blur",outFocus);if($label.value!=""){$label.parentNode.querySelector('label').classList.add("focus");}});};fAnimInput();if(pageTitle===' » Tous les artistes - Saint-Léon\'Art'){jQuery(function($){$('#filter').submit(function(){var filter=$('#filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.artist__container').html(data);console.log(data);}});return false;});});}if(pageTitle===' » Tous les événements - Saint-Léon\'Art'){jQuery(function($){$('#event_filter').submit(function(){var filter=$('#event_filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.event__container').html(data);console.log(data);}});return false;});});}if(pageTitle===' » Actualités - Saint-Léon\'Art'){jQuery(function($){$('#news_filter').submit(function(){var filter=$('#news_filter');$.ajax({url:filter.attr('action'),data:filter.serialize(),type:filter.attr('method'),success:function success(data){$('.event__container').html(data);console.log(data);}});return false;});});}if(window.matchMedia("(min-width: 980px)").matches){var fAddLogoMenu=function fAnimMenu(){var menu=document.querySelector('ul.menu');var li=document.createElement("li");var span=document.createElement('span');var sheet=window.document.styleSheets[0];var midle=menu.childNodes[7];li.appendChild(span);span.appendChild(document.createTextNode("SaintLeon'Art"));menu.insertBefore(li,midle.nextSibling);li.classList.add('menu__item');li.classList.add('logo');span.classList.add('logo');menu.classList.add('onScroll');sheet.insertRule('.header {padding-top: 0px;}',sheet.cssRules.length);};var fRemoveLogoMenu=function fRemoveLogoMenu(e){var sheet=window.document.styleSheets[0];var menu=document.querySelector('ul.menu');var logo=menu.querySelector('.menu__item.logo');menu.classList.remove('onScroll');menu.removeChild(logo);sheet.insertRule('.header {padding-top: 24px;}',sheet.cssRules.length);};var AnimMenu=function(){var executed=false;var actionDo=false;return function(e){if(!executed){if(window.pageYOffset>10){executed=true;actionDo=true;fAddLogoMenu();}}if(actionDo&&executed){if(window.pageYOffset<100){actionDo=false;executed=false;fRemoveLogoMenu();}}};}();window.addEventListener('scroll',AnimMenu);}function PathLoader(el){this.el=el;this.strokeLength=el.getTotalLength();this.el.style.strokeDasharray=this.el.style.strokeDashoffset=this.strokeLength;}PathLoader.prototype._draw=function(val){this.el.style.strokeDashoffset=this.strokeLength*(1-val);};PathLoader.prototype.setProgress=function(val,cb){this._draw(val);if(cb&&typeof cb==='function')cb();};PathLoader.prototype.setProgressFn=function(fn){if(typeof fn==='function')fn(this);};var body=document.body,svg=document.querySelector('svg path');if(svg!==null){svg=new PathLoader(svg);setTimeout(function(){document.body.classList.add('active');svg.setProgress(1);},200);}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJwYWdlVGl0bGUiLCJkb2N1bWVudCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlubmVyVGV4dCIsInRpbWVUb0xhdW5jaCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRpZmYiLCJ0YXJnZXREYXRlIiwiTWF0aCIsImFicyIsImZsb29yIiwiZGF5cyIsInNlYyIsImhycyIsIm1pbiIsImNvdW50RG93blRpbWVyIiwiJCIsInRleHQiLCJzZXRUaW1lb3V0IiwibnVtYmVyVHJhbnNpdGlvbiIsImlkIiwiZW5kUG9pbnQiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uRWFzZSIsIm51bWJlckNvdW50IiwiYW5pbWF0ZSIsImR1cmF0aW9uIiwiZWFzaW5nIiwic3RlcCIsImNvbXBsZXRlIiwiaGFtYnVyZ2VyIiwicXVlcnlTZWxlY3RvciIsInNlYXJjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJib2R5IiwicGFyZW50Tm9kZSIsImZBY3RpdmUiLCJyZW1vdmUiLCJjdXJyZW50VGFyZ2V0IiwiYWRkIiwiYnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwiJGJ0biIsImZDYW5jZWxBbmNob3IiLCJidWxsZXRzIiwidHJhbnNsYXRlVmFsdWUiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImdldEF0dHJpYnV0ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaW1nIiwicHJldk5leHQiLCIkcHJldk5leHQiLCJwcmV2TmV4dFBhcmVudCIsImNoaWxkTm9kZXMiLCJ2aXNpYmlsaXR5IiwiYnRuQSIsImJ0biIsImVhY2giLCJwcm9wIiwiQ291bnRlciIsIm5vdyIsImNlaWwiLCJmQW5pbUlucHV0IiwiaW5wdXQiLCJnZXRGb2N1cyIsIm9FdmVudCIsIm9JbnB1dCIsIm91dEZvY3VzIiwidmFsdWUiLCJsZW5ndGgiLCIkbGFiZWwiLCJqUXVlcnkiLCJzdWJtaXQiLCJmaWx0ZXIiLCJhamF4IiwidXJsIiwiYXR0ciIsImRhdGEiLCJzZXJpYWxpemUiLCJ0eXBlIiwic3VjY2VzcyIsImh0bWwiLCJjb25zb2xlIiwibG9nIiwiZkFkZExvZ29NZW51IiwiZkFuaW1NZW51IiwibWVudSIsImxpIiwiY3JlYXRlRWxlbWVudCIsInNwYW4iLCJzaGVldCIsInN0eWxlU2hlZXRzIiwibWlkbGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJpbnNlcnRSdWxlIiwiY3NzUnVsZXMiLCJmUmVtb3ZlTG9nb01lbnUiLCJsb2dvIiwicmVtb3ZlQ2hpbGQiLCJBbmltTWVudSIsImV4ZWN1dGVkIiwiYWN0aW9uRG8iLCJwYWdlWU9mZnNldCIsIlBhdGhMb2FkZXIiLCJlbCIsInN0cm9rZUxlbmd0aCIsImdldFRvdGFsTGVuZ3RoIiwic3Ryb2tlRGFzaGFycmF5Iiwic3Ryb2tlRGFzaG9mZnNldCIsInByb3RvdHlwZSIsIl9kcmF3IiwidmFsIiwic2V0UHJvZ3Jlc3MiLCJjYiIsInNldFByb2dyZXNzRm4iLCJmbiIsInN2ZyJdLCJtYXBwaW5ncyI6IjBCQUNBLEdBQU1BLFdBQVlDLFNBQVNDLElBQVQsQ0FBY0Msb0JBQWQsQ0FBbUMsT0FBbkMsRUFBNEMsQ0FBNUMsRUFBK0NDLFNBQWpFLENBRUEsR0FBSUosWUFBYyw2QkFBbEIsQ0FBaUQsSUErQnBDSyxhQS9Cb0MsQ0ErQjdDLFFBQVNBLGFBQVQsRUFBd0IsQ0FFcEIsR0FBSUMsYUFBYyxHQUFJQyxLQUFKLEVBQWxCLENBR0EsR0FBSUMsTUFBTyxDQUFDRixZQUFjRyxVQUFmLEVBQTZCLElBQXhDLENBQ0EsR0FBSUQsTUFBT0UsS0FBS0MsR0FBTCxDQUFTRCxLQUFLRSxLQUFMLENBQVdKLElBQVgsQ0FBVCxDQUFYLENBR0FLLEtBQU9ILEtBQUtFLEtBQUws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RixJQUFJSixXQUFKLENBQWdCLENBQWhCLEVBQ0gsQ0FIRCxDQUdHLEdBSEgsRUFJSCxDIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5jb25zdCBwYWdlVGl0bGUgPSBkb2N1bWVudC5oZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aXRsZScpWzBdLmlubmVyVGV4dDtcclxuXHJcbmlmIChwYWdlVGl0bGUgPT09ICdCaWVudmVudWUgLSBTYWludC1Mw6lvblxcJ0FydCcgKXtcclxuXHJcbiAgICAvLyBDb3VudGRvd24gaG9tZSBwYWdlXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAvLyBUaGUgZGF0ZSB5b3Ugd2FudCB0byBjb3VudCBkb3duIHRvXHJcbiAgICB2YXIgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKFwiMjAxOC8wOC8xOSAxODowMDowMFwiKTtcclxuXHJcbiAgICAvLyBPdGhlciBkYXRlIHJlbGF0ZWQgdmFyaWFibGVzXHJcbiAgICB2YXIgZGF5cztcclxuICAgIHZhciBocnM7XHJcbiAgICB2YXIgbWluO1xyXG4gICAgdmFyIHNlYztcclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgKiBPTiBET0NVTUVOVCBMT0FEXHJcbiAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGltZSB1bnRpbCBsYXVuY2ggZGF0ZVxyXG4gICAgICAgIHRpbWVUb0xhdW5jaCgpO1xyXG4gICAgICAgIC8vIFRyYW5zaXRpb24gdGhlIGN1cnJlbnQgY291bnRkb3duIGZyb20gMCBcclxuICAgICAgICBudW1iZXJUcmFuc2l0aW9uKCcjZGF5cyAubnVtYmVyJywgZGF5cywgMTAwMCwgJ2Vhc2VPdXRRdWFkJyk7XHJcbiAgICAgICAgbnVtYmVyVHJhbnNpdGlvbignI2hvdXJzIC5udW1iZXInLCBocnMsIDEwMDAsICdlYXNlT3V0UXVhZCcpO1xyXG4gICAgICAgIG51bWJlclRyYW5zaXRpb24oJyNtaW51dGVzIC5udW1iZXInLCBtaW4sIDEwMDAsICdlYXNlT3V0UXVhZCcpO1xyXG4gICAgICAgIC8vIEJlZ2luIENvdW50ZG93blxyXG4gICAgICAgIHNldFRpbWVvdXQoY291bnREb3duVGltZXIsIDEwMDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogRklHVVJFIE9VVCBUSEUgQU1PVU5UIE9GIFxyXG4gICAgVElNRSBMRUZUIEJFRk9SRSBMQVVOQ0hcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIGZ1bmN0aW9uIHRpbWVUb0xhdW5jaCgpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgZGF0ZVxyXG4gICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBkYXRlc1xyXG4gICAgICAgIHZhciBkaWZmID0gKGN1cnJlbnREYXRlIC0gdGFyZ2V0RGF0ZSkgLyAxMDAwO1xyXG4gICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoTWF0aC5mbG9vcihkaWZmKSk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG51bWJlciBvZiBkYXlzIHVudGlsIHRhcmdldFxyXG4gICAgICAgIGRheXMgPSBNYXRoLmZsb29yKGRpZmYgLyAoMjQgKiA2MCAqIDYwKSk7XHJcbiAgICAgICAgc2VjID0gZGlmZiAtIGRheXMgKiAyNCAqIDYwICogNjA7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG51bWJlciBvZiBob3VycyB1bnRpbCB0YXJnZXRcclxuICAgICAgICBocnMgPSBNYXRoLmZsb29yKHNlYyAvICg2MCAqIDYwKSk7XHJcbiAgICAgICAgc2VjID0gc2VjIC0gaHJzICogNjAgKiA2MDtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgbnVtYmVyIG9mIG1pbnV0ZXMgdW50aWwgdGFyZ2V0XHJcbiAgICAgICAgbWluID0gTWF0aC5mbG9vcihzZWMgLyAoNjApKTtcclxuICAgICAgICBzZWMgPSBzZWMgLSBtaW4gKiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgKiBESVNQTEFZIFRIRSBDVVJSRU5UIFxyXG4gICAgQ09VTlQgVE8gTEFVTkNIXHJcbiAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICBmdW5jdGlvbiBjb3VudERvd25UaW1lcigpIHtcclxuXHJcbiAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgdGltZSB0byBsYXVuY2hcclxuICAgICAgICB0aW1lVG9MYXVuY2goKTtcclxuXHJcbiAgICAgICAgLy8gV3JpdGUgdG8gY291bnRkb3duIGNvbXBvbmVudFxyXG4gICAgICAgICQoXCIjZGF5cyAubnVtYmVyXCIpLnRleHQoZGF5cyk7XHJcbiAgICAgICAgJChcIiNob3VycyAubnVtYmVyXCIpLnRleHQoaHJzKTtcclxuICAgICAgICAkKFwiI21pbnV0ZXMgLm51bWJlclwiKS50ZXh0KG1pbik7XHJcblxyXG4gICAgICAgIC8vIFJlcGVhdCB0aGUgY2hlY2sgZXZlcnkgc2Vjb25kXHJcbiAgICAgICAgc2V0VGltZW91dChjb3VudERvd25UaW1lciwgMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogVFJBTlNJVElPTiBOVU1CRVJTIEZST00gMFxyXG4gICAgVE8gQ1VSUkVOVCBUSU1FIFVOVElMIExBVU5DSFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZnVuY3Rpb24gbnVtYmVyVHJhbnNpdGlvbihpZCwgZW5kUG9pbnQsIHRyYW5zaXRpb25EdXJhdGlvbiwgdHJhbnNpdGlvbkVhc2UpIHtcclxuICAgICAgICAvLyBUcmFuc2l0aW9uIG51bWJlcnMgZnJvbSAwIHRvIHRoZSBmaW5hbCBudW1iZXJcclxuICAgICAgICAkKHsgbnVtYmVyQ291bnQ6ICQoaWQpLnRleHQoKSB9KS5hbmltYXRlKHsgbnVtYmVyQ291bnQ6IGVuZFBvaW50IH0sIHtcclxuICAgICAgICAgICAgZHVyYXRpb246IHRyYW5zaXRpb25EdXJhdGlvbixcclxuICAgICAgICAgICAgZWFzaW5nOiB0cmFuc2l0aW9uRWFzZSxcclxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJChpZCkudGV4dChNYXRoLmZsb29yKHRoaXMubnVtYmVyQ291bnQpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoaWQpLnRleHQodGhpcy5udW1iZXJDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gSGFtYnVyZ2VyIG1lbnUgYW5kIHNpZGViYXJcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgY29uc3QgaGFtYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbWJ1cmdlcicpO1xyXG4gICAgY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1pY29uJylcclxuXHJcbiAgICBoYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgIGhhbWJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLXNpZGViYXInKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBzZWFyY2guY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpXHJcbiAgICAgICAgc2VhcmNoLnBhcmVudE5vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG4gICAgICAgIHNlYXJjaC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG4gICAgfSk7XHJcblxyXG5pZiAocGFnZVRpdGxlID09PSAnIMK7IFByb2dyYW1tZSAtIFNhaW50LUzDqW9uXFwnQXJ0Jyl7XHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAvLyBFdmVudCBtZW51XHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9ncmFtX19uYXZpZ2F0aW9uIC5kYXkgYScpO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBmQWN0aXZlKGUpIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmFtX19uYXZpZ2F0aW9uIC5kYXkgYS5hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyYW1fX25hdmlnYXRpb24gLmRheSBhLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyYW0gLnRpbWVsaW5lLmFsbCNhbGwnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZXJlJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBBcnJheS5mcm9tKGJ1dHRvbnMpLmZvckVhY2goZnVuY3Rpb24oJGJ0bikge1xyXG4gICAgICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQWN0aXZlKTtcclxuICAgICAgICB9KTtcclxufVxyXG4vLyBpZiAocGFnZVRpdGxlID09PSAnIMK7IFBhZ2UgY29udGFjdCAtIFNhaW50LUzDqW9uXFwnQXJ0Jyl7XHJcbi8vICAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vICAgICAvLyBGb3JtIGNvbnRhY3QgZmVlZGJhY2sgYW5kIGZvY3VzXHJcbi8vICAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vICAgICAgICAgdmFyIGZDaGVja0Zvcm0gPSBmdW5jdGlvbiBmQ2hlY2tGb3JtKCkge1xyXG4vLyAgICAgICAgICAgICB2YXIgJEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtLmNvbnRhY3QnKTtcclxuLy8gICAgICAgICAgICAgdmFyICRTdWJqZWN0RmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ViamVjdCcpO1xyXG4vLyAgICAgICAgICAgICB2YXIgJExhc3ROYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdF9uYW1lJyk7XHJcbi8vICAgICAgICAgICAgIHZhciAkRW1haWxGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpO1xyXG4vLyAgICAgICAgICAgICB2YXIgJE1zZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UnKTtcclxuLy8gICAgICAgICAgICAgdmFyICRTdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLmJ0bi0tYW5pbScpO1xyXG4vLyAgICAgICAgICAgICB2YXIgcmVnZXhwTmFtZSA9IC9eW2EtekEtWlxcdTAwQzAtXFx1MDBGRl0rWyctXT9bYS16QS1aXFx1MDBDMC1cXHUwMEZGXSskLztcclxuLy8gICAgICAgICAgICAgdmFyIHJlZ2V4cEVtYWlsID0gL14oW2EtejAtOV9cXC4tXSspQChbXFxkYS16XFwuLV0rKVxcLihbYS16XFwuXXsyLDZ9KSQvO1xyXG4vLyAgICAgICAgICAgICB2YXIgcmVnZXhwTXNnID0gL14oW2EtekEtWl17Miw0MH0gKyBbYS16QS1aXXsyLDQwfSkkLztcclxuLy8gICAgICAgICAgICAgdmFyIGZDaGVja0FGaWVsZCA9IGZ1bmN0aW9uIGZDaGVja0FGaWVsZChmaWVsZCwgcmVnZXhwKSB7XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoZmllbGQudmFsdWUgPT0gJycpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdHJlIGNoYW1wcyBkZSBmb3JtdWxhaXJlIGVzdCB2aWRlLlwiO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4vLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWdleHAgJiYgIXJlZ2V4cC50ZXN0KGZpZWxkLnZhbHVlKSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCA9IFwiSWwgc2VtYmxlIHF1ZSBsYSB2YWxldXIgcmVudHLDqSBhaXQgdW4gcHJvYmzDqG1lLlwiO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4vLyAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkU3VibWl0QnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnb2snKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgdmFyIGZDaGVja0ZpcnN0TmFtZSA9IGZ1bmN0aW9uIGZDaGVja0ZpcnN0TmFtZSgpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiBmQ2hlY2tBRmllbGQoJFN1YmplY3RGaWVsZCwgcmVnZXhwTmFtZSk7XHJcbi8vICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgIHZhciBmQ2hlY2tMYXN0TmFtZSA9IGZ1bmN0aW9uIGZDaGVja0xhc3ROYW1lKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGZDaGVja0FGaWVsZCgkTGFzdE5hbWVGaWVsZCwgcmVnZXhwTmFtZSk7XHJcbi8vICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgIHZhciBmQ2hlY2tFbWFpbCA9IGZ1bmN0aW9uIGZDaGVja0VtYWlsKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGZDaGVja0FGaWVsZCgkRW1haWxGaWVsZCwgcmVnZXhwRW1haWwpO1xyXG4vLyAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICB2YXIgZkNoZWNrTWVzc2FnZSA9IGZ1bmN0aW9uIGZDaGVja01lc3NhZ2UoKSB7XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoJE1zZ0ZpZWxkLnZhbHVlLnNwbGl0KC9cXHMrLykubGVuZ3RoID49IDMpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdvaycpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgaWYgKCRNc2dGaWVsZC52YWx1ZS5zcGxpdCgvXFxzKy8pLmxlbmd0aCA9PT0gMSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdXMgbidhdmV6IHBhcyDDqWNyaXQgZGUgbWVzc2FnZS5cIjtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LmFkZCgnb24nKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoJE1zZ0ZpZWxkLnZhbHVlLnNwbGl0KC9cXHMrLykubGVuZ3RoIDwgNSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdXMgYXZleiBwYXMgw6ljcmlzIHVuIGFzc2V6IGdyYW5kIG1lc3NhZ2UuXCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICB2YXIgZkNoZWNrQWxsID0gZnVuY3Rpb24gZkNoZWNrQWxsKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKGZDaGVja0ZpcnN0TmFtZSgpICogZkNoZWNrTGFzdE5hbWUoKSAqIGZDaGVja0VtYWlsKCkgKiBmQ2hlY2tNZXNzYWdlKCkgKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJEZvcm0uY2xhc3NMaXN0LmFkZCgndmFsaWQnKTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfTtcclxuXHJcbi8vICAgICAgICAgICAgICRTdWJqZWN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja0ZpcnN0TmFtZSwgZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAkTGFzdE5hbWVGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZkNoZWNrTGFzdE5hbWUsIGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgJEVtYWlsRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja0VtYWlsLCBmYWxzZSk7XHJcbi8vICAgICAgICAgICAgICRNc2dGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZkNoZWNrTWVzc2FnZSwgZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAkU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZkNoZWNrQWxsLCBmYWxzZSk7XHJcbi8vICAgICAgICAgfTtcclxuLy8gICAgICAgICBmQ2hlY2tGb3JtKCk7XHJcbi8vfVxyXG5pZiAocGFnZVRpdGxlID09PSAnIMK7IMOAIHByb3BvcyAtIFNhaW50LUzDqW9uXFwnQXJ0Jyl7XHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAvLyBKUyBTbGlkZXJcclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIGNvbnN0IGZDYW5jZWxBbmNob3IgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ1bGxldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnVsbGV0c19uYXYnKTtcclxuICAgIHZhciB0cmFuc2xhdGVWYWx1ZTtcclxuICAgIEFycmF5LmZyb20oYnVsbGV0cykuZm9yRWFjaChmdW5jdGlvbiAoJGJ0bikge1xyXG4gICAgICAgICRidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZDYW5jZWxBbmNob3IpO1xyXG5cclxuXHJcbiAgICAgICAgJGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDczOXB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGVWYWx1ZS1tb2JpbGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRidG4uZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZVZhbHVlLWRlc2t0b3AnKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcyBhY3RpdmUgZnJvbSBwcmVjIGZvY3VzXHJcbiAgICAgICAgICAgIGlmICgkYnRuLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkYnRuLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHRyYW5zbGF0ZVggYW5pbWF0aW9uIG9mIHNsaWRlclxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyJykuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0cmFuc2xhdGVWYWx1ZX0pYDtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGFzcyBhY3RpdmUgZnJvbSBhY3R1YWwgZm9jdXNcclxuICAgICAgICAgICAgJGJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBvcGFjaXR5IG9mIHByZWMvbmV4dCBpbWFnZVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltZ1skYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1wcmVjLWltZycpXS5jbGFzc0xpc3QudG9nZ2xlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICBpbWdbJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmV4dC1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHByZXZOZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZXZOZXh0IGRpdiBidXR0b24nKTtcclxuXHJcbiAgICBBcnJheS5mcm9tKHByZXZOZXh0KS5mb3JFYWNoKGZ1bmN0aW9uICgkcHJldk5leHQpIHtcclxuICAgICAgICAkcHJldk5leHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZDYW5jZWxBbmNob3IpO1xyXG5cclxuXHJcbiAgICAgICAgJHByZXZOZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3MzlweClcIikubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlID0gJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGVWYWx1ZS1tb2JpbGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtZGVza3RvcCcpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBNYWtlIHRyYW5zbGF0ZVggYW5pbWF0aW9uIG9mIHNsaWRlclxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyJykuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0cmFuc2xhdGVWYWx1ZX0pYDtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB2YXJpYWJsZSBmb3IgdGhlIHBhcmVudFxyXG4gICAgICAgICAgICBjb25zdCBwcmV2TmV4dFBhcmVudCA9ICRwcmV2TmV4dC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdmlzaWJsZS9oaWRkZW4gc3R5bGUgZm9yIHRoZSBuZXh0UHJlYyBidXR0b25cclxuICAgICAgICAgICAgcHJldk5leHRQYXJlbnQuY2hpbGROb2Rlc1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLW5leHQnKV0uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICAgICAgcHJldk5leHRQYXJlbnQuY2hpbGROb2Rlc1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXByZWMnKV0uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hhbmdlIG9wYWNpdHkgb2YgcHJlYy9uZXh0IGltYWdlXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyIC5wcmVjTmV4dCcpKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyIC5wcmVjTmV4dCcpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyIC5wcmVjTmV4dCcpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW1nWyRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJlYy1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgaW1nWyRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmV4dC1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcyBhY3RpdmUgZnJvbSBidWxsZXRzIHByZWMgZm9jdXNcclxuICAgICAgICAgICAgY29uc3QgYnRuQSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWxsZXRzX25hdicpO1xyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVsbGV0c19uYXYnKTtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWxsZXRzIC5hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1bGxldHMgLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgY2xhc3MgYWN0aXZlIGZyb20gYWN0dWFsIGZvY3VzXHJcbiAgICAgICAgICAgIGJ0bkFbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1mb2N1cycpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgZGl2Jyk7XHJcblxyXG4gICAgJCgnLmNvdW50JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wcm9wKCdDb3VudGVyJywgMCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIENvdW50ZXI6ICQodGhpcykudGV4dCgpXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdzd2luZycsXHJcbiAgICAgICAgICAgICAgICBzdGVwOiBmdW5jdGlvbiAobm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KE1hdGguY2VpbChub3cpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIElucHV0IEFuaW1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgdmFyIGZBbmltSW5wdXQgPSBmdW5jdGlvbiBmQW5pbUlucHV0KCkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCcpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0Rm9jdXMgPSBmdW5jdGlvbiBnZXRGb2N1cyhvRXZlbnQpIHtcclxuICAgICAgICAgICAgb0V2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgdmFyIG9JbnB1dCA9ICBvRXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBvSW5wdXQuY2xhc3NMaXN0LmFkZChcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSwyMDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb3V0Rm9jdXMgPSBmdW5jdGlvbiBvdXRGb2N1cyhlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS52YWx1ZS5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuICAgICAgICBBcnJheS5mcm9tKGlucHV0KS5mb3JFYWNoKGZ1bmN0aW9uKCRsYWJlbCkge1xyXG4gICAgICAgICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGdldEZvY3VzKTtcclxuICAgICAgICAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRGb2N1cyk7XHJcbiAgICAgICAgICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvdXRGb2N1cyk7XHJcbiAgICAgICAgICAgIGlmKCRsYWJlbC52YWx1ZSAhPSBcIlwiKXtcclxuICAgICAgICAgICAgICAgICRsYWJlbC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuY2xhc3NMaXN0LmFkZChcImZvY3VzXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmQW5pbUlucHV0KCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIFRheG9ub215IEZpbHRlciBhbmQgcGFnaW5hdGlvblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmlmIChwYWdlVGl0bGUgPT09ICcgwrsgVG91cyBsZXMgYXJ0aXN0ZXMgLSBTYWludC1Mw6lvblxcJ0FydCcpe1xyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgJCgnI2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZpbHRlci5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlci5zZXJpYWxpemUoKSwgLy8gZm9ybSBkYXRhXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWx0ZXIuYXR0cignbWV0aG9kJyksIC8vIFBPU1RcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFydGlzdF9fY29udGFpbmVyJykuaHRtbChkYXRhKTsgLy8gaW5zZXJ0IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5pZiAocGFnZVRpdGxlID09PSAnIMK7IFRvdXMgbGVzIMOpdsOpbmVtZW50cyAtIFNhaW50LUzDqW9uXFwnQXJ0Jykge1xyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgJCgnI2V2ZW50X2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjZXZlbnRfZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZpbHRlci5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlci5zZXJpYWxpemUoKSwgLy8gZm9ybSBkYXRhXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWx0ZXIuYXR0cignbWV0aG9kJyksIC8vIFBPU1RcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmV2ZW50X19jb250YWluZXInKS5odG1sKGRhdGEpOyAvLyBpbnNlcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmlmIChwYWdlVGl0bGUgPT09ICcgwrsgQWN0dWFsaXTDqXMgLSBTYWludC1Mw6lvblxcJ0FydCcpIHtcclxuICAgIGpRdWVyeShmdW5jdGlvbiAoJCkge1xyXG4gICAgICAgICQoJyNuZXdzX2ZpbHRlcicpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkKCcjbmV3c19maWx0ZXInKTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogZmlsdGVyLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyLnNlcmlhbGl6ZSgpLCAvLyBmb3JtIGRhdGFcclxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbHRlci5hdHRyKCdtZXRob2QnKSwgLy8gUE9TVFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZXZlbnRfX2NvbnRhaW5lcicpLmh0bWwoZGF0YSk7IC8vIGluc2VydCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIE1lbnUgYW5pbWF0aW9uIG9uIHNjcm9sbFxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5pZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA5ODBweClcIikubWF0Y2hlcykge1xyXG4gICAgdmFyIGZBZGRMb2dvTWVudSA9IGZ1bmN0aW9uIGZBbmltTWVudSgpIHtcclxuICAgICAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndWwubWVudScpO1xyXG4gICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHZhciBzaGVldCA9IHdpbmRvdy5kb2N1bWVudC5zdHlsZVNoZWV0c1swXTtcclxuICAgICAgICBjb25zdCBtaWRsZSA9IG1lbnUuY2hpbGROb2Rlc1s3XTtcclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChzcGFuKTtcclxuICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiU2FpbnRMZW9uJ0FydFwiKSk7XHJcbiAgICAgICAgbWVudS5pbnNlcnRCZWZvcmUobGksIG1pZGxlLm5leHRTaWJsaW5nKTtcclxuICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtJyk7XHJcbiAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnbG9nbycpO1xyXG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZCgnbG9nbycpO1xyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZCgnb25TY3JvbGwnKTtcclxuICAgICAgICBzaGVldC5pbnNlcnRSdWxlKCcuaGVhZGVyIHtwYWRkaW5nLXRvcDogMHB4O30nLCBzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgdmFyIGZSZW1vdmVMb2dvTWVudSA9IGZ1bmN0aW9uIGZSZW1vdmVMb2dvTWVudShlKSB7XHJcbiAgICAgICAgICAgIHZhciBzaGVldCA9IHdpbmRvdy5kb2N1bWVudC5zdHlsZVNoZWV0c1swXTtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsLm1lbnUnKTtcclxuICAgICAgICAgICAgY29uc3QgbG9nbyA9IG1lbnUucXVlcnlTZWxlY3RvcignLm1lbnVfX2l0ZW0ubG9nbycpO1xyXG4gICAgICAgICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ29uU2Nyb2xsJyk7XHJcbiAgICAgICAgICAgIG1lbnUucmVtb3ZlQ2hpbGQobG9nbyk7XHJcbiAgICAgICAgICAgIHNoZWV0Lmluc2VydFJ1bGUoJy5oZWFkZXIge3BhZGRpbmctdG9wOiAyNHB4O30nLCBzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgdmFyIEFuaW1NZW51ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXhlY3V0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgYWN0aW9uRG8gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFleGVjdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkRvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmQWRkTG9nb01lbnUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGFjdGlvbkRvICYmIGV4ZWN1dGVkKXtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPCAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25EbyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZlJlbW92ZUxvZ29NZW51KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgQW5pbU1lbnUpO1xyXG59XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gTmV3c2xldHRlciB2YWxpZGF0aW9uIGVmZmVjdFxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmZ1bmN0aW9uIFBhdGhMb2FkZXIoZWwpIHtcclxuICAgIHRoaXMuZWwgPSBlbDtcclxuICAgIHRoaXMuc3Ryb2tlTGVuZ3RoID0gZWwuZ2V0VG90YWxMZW5ndGgoKTtcclxuXHJcbiAgICAvLyBzZXQgZGFzaCBvZmZzZXQgdG8gMFxyXG4gICAgdGhpcy5lbC5zdHlsZS5zdHJva2VEYXNoYXJyYXkgPVxyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHRoaXMuc3Ryb2tlTGVuZ3RoO1xyXG59XHJcblxyXG5QYXRoTG9hZGVyLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgIHRoaXMuZWwuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHRoaXMuc3Ryb2tlTGVuZ3RoICogKDEgLSB2YWwpO1xyXG59XHJcblxyXG5QYXRoTG9hZGVyLnByb3RvdHlwZS5zZXRQcm9ncmVzcyA9IGZ1bmN0aW9uICh2YWwsIGNiKSB7XHJcbiAgICB0aGlzLl9kcmF3KHZhbCk7XHJcbiAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYigpO1xyXG59XHJcblxyXG5QYXRoTG9hZGVyLnByb3RvdHlwZS5zZXRQcm9ncmVzc0ZuID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSBmbih0aGlzKTtcclxufVxyXG5cclxudmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgc3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnIHBhdGgnKTtcclxuXHJcbmlmIChzdmcgIT09IG51bGwpIHtcclxuICAgIHN2ZyA9IG5ldyBQYXRoTG9hZGVyKHN2Zyk7XHJcblxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICBzdmcuc2V0UHJvZ3Jlc3MoMSk7XHJcbiAgICB9LCAyMDApO1xyXG59Il19
