;(function(){'use strict';var targetDate=new Date("2018/08/19 18:00:00");var days;var hrs;var min;var sec;$(function(){timeToLaunch();numberTransition('#days .number',days,1000,'easeOutQuad');numberTransition('#hours .number',hrs,1000,'easeOutQuad');numberTransition('#minutes .number',min,1000,'easeOutQuad');setTimeout(countDownTimer,1001);});function timeToLaunch(){var currentDate=new Date();var diff=(currentDate-targetDate)/1000;var diff=Math.abs(Math.floor(diff));days=Math.floor(diff/(24*60*60));sec=diff-days*24*60*60;hrs=Math.floor(sec/(60*60));sec=sec-hrs*60*60;min=Math.floor(sec/60);sec=sec-min*60;}function countDownTimer(){timeToLaunch();$("#days .number").text(days);$("#hours .number").text(hrs);$("#minutes .number").text(min);setTimeout(countDownTimer,1000);}function numberTransition(id,endPoint,transitionDuration,transitionEase){$({numberCount:$(id).text()}).animate({numberCount:endPoint},{duration:transitionDuration,easing:transitionEase,step:function step(){$(id).text(Math.floor(this.numberCount));},complete:function complete(){$(id).text(this.numberCount);}});};var myCenter=new google.maps.LatLng(12.2667,-2.06667);function initialize(){var mapProp={center:myCenter,zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP};var map=new google.maps.Map(document.getElementById("map"),mapProp);var marker=new google.maps.Marker({position:myCenter});marker.setMap(map);}google.maps.event.addDomListener(window,'load',initialize);var hamburger=document.querySelector('.hamburger');var search=document.querySelector('.search-icon');hamburger.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();hamburger.classList.toggle('is-active');document.body.classList.toggle('has-sidebar');});search.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();search.classList.toggle('open');search.parentNode.classList.toggle('open');});var buttons=document.querySelectorAll('.program__navigation a');Array.from(buttons).forEach(function($btn){$btn.addEventListener("click",fActive);});function fActive(e){e.stopPropagation();if(document.querySelector('.active')){document.querySelector('.active').classList.remove('active');}e.currentTarget.classList.add('active');};var fCheckForm=function fCheckForm(){var $Form=document.querySelector('form.contact');var $FirstNameField=document.getElementById('first_name');var $LastNameField=document.getElementById('last_name');var $EmailField=document.getElementById('email');var $MsgField=document.getElementById('message');var $SubmitBtn=document.getElementById('submit');var regexpName=/^[a-zA-Z\u00C0-\u00FF]+['-]?[a-zA-Z\u00C0-\u00FF]+$/;var regexpEmail=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;var regexpMsg=/^([a-zA-Z]{2,40} + [a-zA-Z]{2,40})$/;var fCheckAField=function fCheckAField(field,regexp){if(field.value==''){field.parentNode.querySelector('span').innerHTML="Votre champs de formulaire est vide.";field.parentNode.querySelector('span').classList.add('on');return false;}else if(regexp&&!regexp.test(field.value)){field.parentNode.querySelector('span').innerHTML="Il semble que la valeur rentré ait un problème.";field.parentNode.querySelector('span').classList.add('on');return false;}else{$SubmitBtn.removeAttribute('disabled');field.parentNode.querySelector('span').classList.remove('on');field.parentNode.querySelector('.input').classList.add('ok');return true;}};var fCheckFirstName=function fCheckFirstName(){return fCheckAField($FirstNameField,regexpName);};var fCheckLastName=function fCheckLastName(){return fCheckAField($LastNameField,regexpName);};var fCheckEmail=function fCheckEmail(){return fCheckAField($EmailField,regexpEmail);};var fCheckMessage=function fCheckMessage(){if($MsgField.value.split(/\s+/).length>=3){$MsgField.parentNode.querySelector('span').classList.remove('on');$MsgField.parentNode.querySelector('.input').classList.add('ok');return true;}if($MsgField.value.split(/\s+/).length===1){$MsgField.parentNode.querySelector('span').innerHTML="Vous n'avez pas écrit de message.";$MsgField.parentNode.querySelector('span').classList.add('on');return false;}if($MsgField.value.split(/\s+/).length<5){$MsgField.parentNode.querySelector('span').innerHTML="Vous avez pas écris un assez grand message.";$MsgField.parentNode.querySelector('span').classList.add('on');return false;}};var fCheckAll=function fCheckAll(){if(fCheckFirstName()*fCheckLastName()*fCheckEmail()*fCheckMessage()){$Form.classList.add('valid');}};$FirstNameField.addEventListener('blur',fCheckFirstName,false);$LastNameField.addEventListener('blur',fCheckLastName,false);$EmailField.addEventListener('blur',fCheckEmail,false);$MsgField.addEventListener('blur',fCheckMessage,false);$SubmitBtn.addEventListener('click',fCheckAll,false);};var fCancelAnchor=function fCancelAnchor(e){e.preventDefault();};var bullets=document.querySelectorAll('.bullets_nav');var translateValue;Array.from(bullets).forEach(function($btn){$btn.addEventListener("click",fCancelAnchor);$btn.addEventListener('click',function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$btn.getAttribute('data-translateValue-mobile');}else{var translateValue=$btn.getAttribute('data-translateValue-desktop');}if($btn.parentNode.querySelector('.active')){$btn.parentNode.querySelector('.active').classList.remove('active');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';$btn.classList.add('active');if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$btn.getAttribute('data-prec-img')].classList.toggle('precNext');img[$btn.getAttribute('data-next-img')].classList.toggle('precNext');});});var prevNext=document.querySelectorAll('.prevNext div a');Array.from(prevNext).forEach(function($prevNext){$prevNext.addEventListener("click",fCancelAnchor);$prevNext.addEventListener("click",function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$prevNext.getAttribute('data-translateValue-mobile');}else{var translateValue=$prevNext.getAttribute('data-translateValue-desktop');}console.log(window.matchMedia("(max-width: 739px)").matches);console.log(translateValue);document.querySelector('.slider').style.transform='translateX('+translateValue+')';var prevNextParent=$prevNext.parentNode.parentNode;prevNextParent.childNodes[$prevNext.getAttribute('data-next')].style.visibility='visible';prevNextParent.childNodes[$prevNext.getAttribute('data-prec')].style.visibility='hidden';if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$prevNext.getAttribute('data-prec-img')].classList.toggle('precNext');img[$prevNext.getAttribute('data-next-img')].classList.toggle('precNext');var btnA=document.querySelectorAll('.bullets_nav');var btn=document.querySelector('.bullets_nav');if(document.querySelector('.bullets .active')){document.querySelector('.bullets .active').classList.remove('active');}btnA[$prevNext.getAttribute('data-focus')].classList.add('active');});});var img=document.querySelectorAll('.slider div');var fAnimInput=function fAnimInput(){var input=document.querySelectorAll('.input');var getFocus=function getFocus(oEvent){oEvent.currentTarget.parentNode.querySelector('label').classList.add("focus");var oInput=oEvent.currentTarget.parentNode.querySelector('.input');console.log(oEvent);setTimeout(function(){oInput.classList.add("border");},200);};var outFocus=function outFocus(e){if(e.currentTarget.parentNode.querySelector('.input').value.length===0||e.currentTarget.parentNode.querySelector('.input option').value.length===0){e.currentTarget.parentNode.querySelector('label').classList.remove("focus");}console.log(e.currentTarget);e.currentTarget.classList.remove("border");};Array.from(input).forEach(function($label){$label.addEventListener("focus",getFocus);$label.addEventListener("click",getFocus);$label.addEventListener("blur",outFocus);});};fAnimInput();})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJ0YXJnZXREYXRlIiwiRGF0ZSIsImRheXMiLCJocnMiLCJtaW4iLCJzZWMiLCIkIiwidGltZVRvTGF1bmNoIiwibnVtYmVyVHJhbnNpdGlvbiIsInNldFRpbWVvdXQiLCJjb3VudERvd25UaW1lciIsImN1cnJlbnREYXRlIiwiZGlmZiIsIk1hdGgiLCJhYnMiLCJmbG9vciIsInRleHQiLCJpZCIsImVuZFBvaW50IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwidHJhbnNpdGlvbkVhc2UiLCJudW1iZXJDb3VudCIsImFuaW1hdGUiLCJkdXJhdGlvbiIsImVhc2luZyIsInN0ZXAiLCJjb21wbGV0ZSIsIm15Q2VudGVyIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImluaXRpYWxpemUiLCJtYXBQcm9wIiwiY2VudGVyIiwiem9vbSIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJtYXAiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibWFya2VyIiwiTWFya2VyIiwicG9zaXRpb24iLCJzZXRNYXAiLCJldmVudCIsImFkZERvbUxpc3RlbmVyIiwid2luZG93IiwiaGFtYnVyZ2VyIiwicXVlcnlTZWxlY3RvciIsInNlYXJjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJib2R5IiwicGFyZW50Tm9kZSIsImJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsIiRidG4iLCJmQWN0aXZlIiwicmVtb3ZlIiwiY3VycmVudFRhcmdldCIsImFkZCIsImZDaGVja0Zvcm0iLCIkRm9ybSIsIiRGaXJzdE5hbWVGaWVsZCIsIiRMYXN0TmFtZUZpZWxkIiwiJEVtYWlsRmllbGQiLCIkTXNnRmllbGQiLCIkU3VibWl0QnRuIiwicmVnZXhwTmFtZSIsInJlZ2V4cEVtYWlsIiwicmVnZXhwTXNnIiwiZkNoZWNrQUZpZWxkIiwiZmllbGQiLCJyZWdleHAiLCJ2YWx1ZSIsImlubmVySFRNTCIsInRlc3QiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmQ2hlY2tGaXJzdE5hbWUiLCJmQ2hlY2tMYXN0TmFtZSIsImZDaGVja0VtYWlsIiwiZkNoZWNrTWVzc2FnZSIsInNwbGl0IiwibGVuZ3RoIiwiZkNoZWNrQWxsIiwiZkNhbmNlbEFuY2hvciIsImJ1bGxldHMiLCJ0cmFuc2xhdGVWYWx1ZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZ2V0QXR0cmlidXRlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJpbWciLCJwcmV2TmV4dCIsIiRwcmV2TmV4dCIsImNvbnNvbGUiLCJsb2ciLCJwcmV2TmV4dFBhcmVudCIsImNoaWxkTm9kZXMiLCJ2aXNpYmlsaXR5IiwiYnRuQSIsImJ0biIsImZBbmltSW5wdXQiLCJpbnB1dCIsImdldEZvY3VzIiwib0V2ZW50Iiwib0lucHV0Iiwib3V0Rm9jdXMiLCIkbGFiZWwiXSwibWFwcGluZ3MiOiIwQkFHSSxHQUFJQSxZQUFhLEdBQUlDLEtBQUosQ0FBUyxxQkFBVCxDQUFqQixDQUdBLEdBQUlDLEtBQUosQ0FDQSxHQUFJQyxJQUFKLENBQ0EsR0FBSUMsSUFBSixDQUNBLEdBQUlDLElBQUosQ0FLQUMsRUFBRSxVQUFXLENBRVRDLGVBRUFDLGlCQUFpQixlQUFqQixDQUFrQ04sSUFBbEMsQ0FBd0MsSUFBeEMsQ0FBOEMsYUFBOUMsRUFDQU0saUJBQWlCLGdCQUFqQixDQUFtQ0wsR0FBbkMsQ0FBd0MsSUFBeEMsQ0FBOEMsYUFBOUMsRUFDQUssaUJBQWlCLGtCQUFqQixDQUFxQ0osR0FBckMsQ0FBMEMsSUFBMUMsQ0FBZ0QsYUFBaEQsRUFFQUssV0FBV0MsY0FBWCxDQUEwQixJQUExQixFQUNILENBVEQsRUFlQSxRQUFTSCxhQUFULEVBQXVCLENBRW5CLEdBQUlJLGFBQWMsR0FBSVYsS0FBSixFQUFsQixDQUdBLEdBQUlXLE1BQU8sQ0FBQ0QsWUFBY1gsVUFB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QmhFLENBQWxCLENBQXFCLENBQ2hDLEdBQUlBLEVBQUVlLGFBQUYsQ0FBZ0JULFVBQWhCLENBQTJCVCxhQUEzQixDQUF5QyxRQUF6QyxFQUFtRGlDLEtBQW5ELENBQXlEUyxNQUF6RCxHQUFvRSxDQUFwRSxFQUF5RXZDLEVBQUVlLGFBQUYsQ0FBZ0JULFVBQWhCLENBQTJCVCxhQUEzQixDQUF5QyxlQUF6QyxFQUEwRGlDLEtBQTFELENBQWdFUyxNQUFoRSxHQUEyRSxDQUF4SixDQUE0SixDQUN4SnZDLEVBQUVlLGFBQUYsQ0FBZ0JULFVBQWhCLENBQTJCVCxhQUEzQixDQUF5QyxPQUF6QyxFQUFrRE0sU0FBbEQsQ0FBNERXLE1BQTVELENBQW1FLE9BQW5FLEVBQ0gsQ0FDRHNDLFFBQVFDLEdBQVIsQ0FBWXJELEVBQUVlLGFBQWQsRUFDQWYsRUFBRWUsYUFBRixDQUFnQlosU0FBaEIsQ0FBMEJXLE1BQTFCLENBQWlDLFFBQWpDLEVBRUgsQ0FQRCxDQVFBTCxNQUFNQyxJQUFOLENBQVdrRCxLQUFYLEVBQWtCakQsT0FBbEIsQ0FBMEIsU0FBU3NELE1BQVQsQ0FBaUIsQ0FDdkNBLE9BQU9sRSxnQkFBUCxDQUF3QixPQUF4QixDQUFpQzhELFFBQWpDLEVBQ0FJLE9BQU9sRSxnQkFBUCxDQUF3QixPQUF4QixDQUFpQzhELFFBQWpDLEVBQ0FJLE9BQU9sRSxnQkFBUCxDQUF3QixNQUF4QixDQUFnQ2lFLFFBQWhDLEVBRUgsQ0FMRCxFQU1ILENBOUJELENBK0JBTCxhIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvdW50ZG93biBob21lIHBhZ2VcclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIC8vIFRoZSBkYXRlIHlvdSB3YW50IHRvIGNvdW50IGRvd24gdG9cclxuICAgIHZhciB0YXJnZXREYXRlID0gbmV3IERhdGUoXCIyMDE4LzA4LzE5IDE4OjAwOjAwXCIpOyAgIFxyXG5cclxuICAgIC8vIE90aGVyIGRhdGUgcmVsYXRlZCB2YXJpYWJsZXNcclxuICAgIHZhciBkYXlzO1xyXG4gICAgdmFyIGhycztcclxuICAgIHZhciBtaW47XHJcbiAgICB2YXIgc2VjO1xyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAqIE9OIERPQ1VNRU5UIExPQURcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRpbWUgdW50aWwgbGF1bmNoIGRhdGVcclxuICAgICAgICB0aW1lVG9MYXVuY2goKTtcclxuICAgICAgICAvLyBUcmFuc2l0aW9uIHRoZSBjdXJyZW50IGNvdW50ZG93biBmcm9tIDAgXHJcbiAgICAgICAgbnVtYmVyVHJhbnNpdGlvbignI2RheXMgLm51bWJlcicsIGRheXMsIDEwMDAsICdlYXNlT3V0UXVhZCcpO1xyXG4gICAgICAgIG51bWJlclRyYW5zaXRpb24oJyNob3VycyAubnVtYmVyJywgaHJzLCAxMDAwLCAnZWFzZU91dFF1YWQnKTtcclxuICAgICAgICBudW1iZXJUcmFuc2l0aW9uKCcjbWludXRlcyAubnVtYmVyJywgbWluLCAxMDAwLCAnZWFzZU91dFF1YWQnKTtcclxuICAgICAgICAvLyBCZWdpbiBDb3VudGRvd25cclxuICAgICAgICBzZXRUaW1lb3V0KGNvdW50RG93blRpbWVyLDEwMDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogRklHVVJFIE9VVCBUSEUgQU1PVU5UIE9GIFxyXG4gICAgVElNRSBMRUZUIEJFRk9SRSBMQVVOQ0hcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIGZ1bmN0aW9uIHRpbWVUb0xhdW5jaCgpe1xyXG4gICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBkYXRlXHJcbiAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGRhdGVzXHJcbiAgICAgICAgdmFyIGRpZmYgPSAoY3VycmVudERhdGUgLSB0YXJnZXREYXRlKS8xMDAwO1xyXG4gICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoTWF0aC5mbG9vcihkaWZmKSk7ICBcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgbnVtYmVyIG9mIGRheXMgdW50aWwgdGFyZ2V0XHJcbiAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IoZGlmZi8oMjQqNjAqNjApKTtcclxuICAgICAgICBzZWMgPSBkaWZmIC0gZGF5cyAqIDI0KjYwKjYwO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBudW1iZXIgb2YgaG91cnMgdW50aWwgdGFyZ2V0XHJcbiAgICAgICAgaHJzID0gTWF0aC5mbG9vcihzZWMvKDYwKjYwKSk7XHJcbiAgICAgICAgc2VjID0gc2VjIC0gaHJzICogNjAqNjA7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG51bWJlciBvZiBtaW51dGVzIHVudGlsIHRhcmdldFxyXG4gICAgICAgIG1pbiA9IE1hdGguZmxvb3Ioc2VjLyg2MCkpO1xyXG4gICAgICAgIHNlYyA9IHNlYyAtIG1pbiAqIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAqIERJU1BMQVkgVEhFIENVUlJFTlQgXHJcbiAgICBDT1VOVCBUTyBMQVVOQ0hcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIGZ1bmN0aW9uIGNvdW50RG93blRpbWVyKCl7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHRpbWUgdG8gbGF1bmNoXHJcbiAgICAgICAgdGltZVRvTGF1bmNoKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV3JpdGUgdG8gY291bnRkb3duIGNvbXBvbmVudFxyXG4gICAgICAgICQoIFwiI2RheXMgLm51bWJlclwiICkudGV4dChkYXlzKTtcclxuICAgICAgICAkKCBcIiNob3VycyAubnVtYmVyXCIgKS50ZXh0KGhycyk7XHJcbiAgICAgICAgJCggXCIjbWludXRlcyAubnVtYmVyXCIgKS50ZXh0KG1pbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVwZWF0IHRoZSBjaGVjayBldmVyeSBzZWNvbmRcclxuICAgICAgICBzZXRUaW1lb3V0KGNvdW50RG93blRpbWVyLDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAqIFRSQU5TSVRJT04gTlVNQkVSUyBGUk9NIDBcclxuICAgIFRPIENVUlJFTlQgVElNRSBVTlRJTCBMQVVOQ0hcclxuICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIGZ1bmN0aW9uIG51bWJlclRyYW5zaXRpb24oaWQsIGVuZFBvaW50LCB0cmFuc2l0aW9uRHVyYXRpb24sIHRyYW5zaXRpb25FYXNlKXtcclxuICAgICAgICAvLyBUcmFuc2l0aW9uIG51bWJlcnMgZnJvbSAwIHRvIHRoZSBmaW5hbCBudW1iZXJcclxuICAgICAgICAkKHtudW1iZXJDb3VudDogJChpZCkudGV4dCgpfSkuYW5pbWF0ZSh7bnVtYmVyQ291bnQ6IGVuZFBvaW50fSwge1xyXG4gICAgICAgICAgICBkdXJhdGlvbjogdHJhbnNpdGlvbkR1cmF0aW9uLFxyXG4gICAgICAgICAgICBlYXNpbmc6dHJhbnNpdGlvbkVhc2UsXHJcbiAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJChpZCkudGV4dChNYXRoLmZsb29yKHRoaXMubnVtYmVyQ291bnQpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJChpZCkudGV4dCh0aGlzLm51bWJlckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyBcclxuICAgIH07XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gR29vZ2xlIG1hcCBpbmRpdmlkdWFsXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIHZhciBteUNlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMTIuMjY2NywgLTIuMDY2NjcpO1xyXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB2YXIgbWFwUHJvcCA9IHtcclxuICAgICAgICAgICAgY2VudGVyOiBteUNlbnRlcixcclxuICAgICAgICAgICAgem9vbTogNyxcclxuICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIiksIG1hcFByb3ApO1xyXG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG15Q2VudGVyLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1hcmtlci5zZXRNYXAobWFwKTtcclxuICAgIH1cclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgJ2xvYWQnLCBpbml0aWFsaXplKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBIYW1idXJnZXIgbWVudSBhbmQgc2lkZWJhclxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICBjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XHJcbiAgICBjb25zdCBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWljb24nKVxyXG5cclxuICAgIGhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgaGFtYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtc2lkZWJhcicpXHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgIHNlYXJjaC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJylcclxuICAgICAgICBzZWFyY2gucGFyZW50Tm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XHJcbiAgICB9KTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBFdmVudCBtZW51XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZ3JhbV9fbmF2aWdhdGlvbiBhJyk7XHJcblxyXG4gICAgQXJyYXkuZnJvbShidXR0b25zKS5mb3JFYWNoKGZ1bmN0aW9uKCRidG4pIHtcclxuICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQWN0aXZlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZBY3RpdmUoZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgLy9lLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYoICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykgKXtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9O1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIEZvcm0gY29udGFjdCBmZWVkYmFjayBhbmQgZm9jdXNcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgdmFyIGZDaGVja0Zvcm0gPSBmdW5jdGlvbiBmQ2hlY2tGb3JtKCkge1xyXG4gICAgICAgIHZhciAkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0uY29udGFjdCcpO1xyXG4gICAgICAgIHZhciAkRmlyc3ROYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlyc3RfbmFtZScpO1xyXG4gICAgICAgIHZhciAkTGFzdE5hbWVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0X25hbWUnKTtcclxuICAgICAgICB2YXIgJEVtYWlsRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKTtcclxuICAgICAgICB2YXIgJE1zZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UnKTtcclxuICAgICAgICB2YXIgJFN1Ym1pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQnKTtcclxuICAgICAgICB2YXIgcmVnZXhwTmFtZSA9IC9eW2EtekEtWlxcdTAwQzAtXFx1MDBGRl0rWyctXT9bYS16QS1aXFx1MDBDMC1cXHUwMEZGXSskLztcclxuICAgICAgICB2YXIgcmVnZXhwRW1haWwgPSAvXihbYS16MC05X1xcLi1dKylAKFtcXGRhLXpcXC4tXSspXFwuKFthLXpcXC5dezIsNn0pJC87XHJcbiAgICAgICAgdmFyIHJlZ2V4cE1zZyA9IC9eKFthLXpBLVpdezIsNDB9ICsgW2EtekEtWl17Miw0MH0pJC87XHJcbiAgICAgICAgdmFyIGZDaGVja0FGaWVsZCA9IGZ1bmN0aW9uIGZDaGVja0FGaWVsZChmaWVsZCwgcmVnZXhwKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZC52YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJWb3RyZSBjaGFtcHMgZGUgZm9ybXVsYWlyZSBlc3QgdmlkZS5cIjtcclxuICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnZXhwICYmICFyZWdleHAudGVzdChmaWVsZC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCA9IFwiSWwgc2VtYmxlIHF1ZSBsYSB2YWxldXIgcmVudHLDqSBhaXQgdW4gcHJvYmzDqG1lLlwiO1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LmFkZCgnb24nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRTdWJtaXRCdG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcclxuICAgICAgICAgICAgICAgIGZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnb2snKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZkNoZWNrRmlyc3ROYW1lID0gZnVuY3Rpb24gZkNoZWNrRmlyc3ROYW1lKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZkNoZWNrQUZpZWxkKCRGaXJzdE5hbWVGaWVsZCwgcmVnZXhwTmFtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZkNoZWNrTGFzdE5hbWUgPSBmdW5jdGlvbiBmQ2hlY2tMYXN0TmFtZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZDaGVja0FGaWVsZCgkTGFzdE5hbWVGaWVsZCwgcmVnZXhwTmFtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZkNoZWNrRW1haWwgPSBmdW5jdGlvbiBmQ2hlY2tFbWFpbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZDaGVja0FGaWVsZCgkRW1haWxGaWVsZCwgcmVnZXhwRW1haWwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGZDaGVja01lc3NhZ2UgPSBmdW5jdGlvbiBmQ2hlY2tNZXNzYWdlKCkge1xyXG4gICAgICAgICAgICBpZiAoJE1zZ0ZpZWxkLnZhbHVlLnNwbGl0KC9cXHMrLykubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpO1xyXG4gICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnb2snKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkTXNnRmllbGQudmFsdWUuc3BsaXQoL1xccysvKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdXMgbidhdmV6IHBhcyDDqWNyaXQgZGUgbWVzc2FnZS5cIjtcclxuICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkTXNnRmllbGQudmFsdWUuc3BsaXQoL1xccysvKS5sZW5ndGggPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJWb3VzIGF2ZXogcGFzIMOpY3JpcyB1biBhc3NleiBncmFuZCBtZXNzYWdlLlwiO1xyXG4gICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBmQ2hlY2tBbGwgPSBmdW5jdGlvbiBmQ2hlY2tBbGwoKSB7XHJcbiAgICAgICAgICAgIGlmIChmQ2hlY2tGaXJzdE5hbWUoKSAqIGZDaGVja0xhc3ROYW1lKCkgKiBmQ2hlY2tFbWFpbCgpICogZkNoZWNrTWVzc2FnZSgpICkge1xyXG4gICAgICAgICAgICAgICAgJEZvcm0uY2xhc3NMaXN0LmFkZCgndmFsaWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRGaXJzdE5hbWVGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZkNoZWNrRmlyc3ROYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgJExhc3ROYW1lRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja0xhc3ROYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgJEVtYWlsRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja0VtYWlsLCBmYWxzZSk7XHJcbiAgICAgICAgJE1zZ0ZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmQ2hlY2tNZXNzYWdlLCBmYWxzZSk7XHJcbiAgICAgICAgJFN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZDaGVja0FsbCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvLyB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQnKTtcclxuXHJcbiAgICAgICAgLy8gdmFyIGdldEZvY3VzID0gZnVuY3Rpb24gZ2V0Rm9jdXMob0V2ZW50KSB7XHJcbiAgICAgICAgLy8gICAgIG9FdmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignbGFiZWwnKS5jbGFzc0xpc3QuYWRkKFwiZm9jdXNcIik7XHJcbiAgICAgICAgLy8gICAgIHZhciBvSW5wdXQgPSAgb0V2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKTtcclxuICAgICAgICAvLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coKVxyXG4gICAgICAgIC8vICAgICAgICAgb0lucHV0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXJcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgICAgIH0sMjAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gfTtcclxuXHJcbiAgICAgICAgIFxyXG5cclxuICAgICAgICAvLyB2YXIgb3V0Rm9jdXMgPSBmdW5jdGlvbiBvdXRGb2N1cyhlKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS52YWx1ZS5sZW5ndGggPT09IDAgfHwgZS5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0IG9wdGlvbicpLnZhbHVlLmxlbmd0aCA9PT0gMCApIHtcclxuICAgICAgICAvLyAgICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuY2xhc3NMaXN0LnJlbW92ZShcImZvY3VzXCIpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGUuY3VycmVudFRhcmdldClcclxuICAgICAgICAvLyAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXJcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIH07XHJcbiAgICAgICAgLy8gQXJyYXkuZnJvbShpbnB1dCkuZm9yRWFjaChmdW5jdGlvbigkbGFiZWwpIHtcclxuICAgICAgICAvLyAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBnZXRGb2N1cyk7XHJcbiAgICAgICAgLy8gICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ2V0Rm9jdXMpO1xyXG4gICAgICAgIC8vICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb3V0Rm9jdXMpO1xyXG5cclxuICAgICAgICAvLyB9KTtcclxuICAgIH07XHJcbiAgICAvL2ZDaGVja0Zvcm0oKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBKUyBTbGlkZXJcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHJcbiAgICBjb25zdCBmQ2FuY2VsQW5jaG9yID0gZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJ1bGxldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnVsbGV0c19uYXYnKTtcclxuICAgIHZhciB0cmFuc2xhdGVWYWx1ZTtcclxuICAgIEFycmF5LmZyb20oYnVsbGV0cykuZm9yRWFjaChmdW5jdGlvbigkYnRuKSB7XHJcbiAgICAgICAgJGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZkNhbmNlbEFuY2hvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgJGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xyXG5cclxuICAgICAgICAgICAgaWYoIHdpbmRvdy5tYXRjaE1lZGlhKCBcIihtYXgtd2lkdGg6IDczOXB4KVwiICkubWF0Y2hlcyApe1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlID0gJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRidG4uZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZVZhbHVlLWRlc2t0b3AnKTtcclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY2xhc3MgYWN0aXZlIGZyb20gcHJlYyBmb2N1c1xyXG4gICAgICAgICAgICBpZiggJGJ0bi5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKSApe1xyXG4gICAgICAgICAgICAgICAgJGJ0bi5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSB0cmFuc2xhdGVYIGFuaW1hdGlvbiBvZiBzbGlkZXJcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhbnNsYXRlVmFsdWV9KWA7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgY2xhc3MgYWN0aXZlIGZyb20gYWN0dWFsIGZvY3VzXHJcbiAgICAgICAgICAgICRidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGFuZ2Ugb3BhY2l0eSBvZiBwcmVjL25leHQgaW1hZ2VcclxuICAgICAgICAgICAgaWYoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JykgKXtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWdbJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJlYy1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgaW1nWyRidG4uZ2V0QXR0cmlidXRlKCdkYXRhLW5leHQtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgcHJldk5leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJldk5leHQgZGl2IGEnKTtcclxuXHJcbiAgICBBcnJheS5mcm9tKHByZXZOZXh0KS5mb3JFYWNoKGZ1bmN0aW9uKCRwcmV2TmV4dCkge1xyXG4gICAgICAgICRwcmV2TmV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZkNhbmNlbEFuY2hvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgJHByZXZOZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKCB3aW5kb3cubWF0Y2hNZWRpYSggXCIobWF4LXdpZHRoOiA3MzlweClcIiApLm1hdGNoZXMgKXtcclxuICAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZVZhbHVlLW1vYmlsZScpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZVZhbHVlLWRlc2t0b3AnKTtcclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYXRjaE1lZGlhKCBcIihtYXgtd2lkdGg6IDczOXB4KVwiICkubWF0Y2hlcyApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFuc2xhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIC8vIE1ha2UgdHJhbnNsYXRlWCBhbmltYXRpb24gb2Ygc2xpZGVyXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3RyYW5zbGF0ZVZhbHVlfSlgO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHZhcmlhYmxlIGZvciB0aGUgcGFyZW50XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZOZXh0UGFyZW50ID0gJHByZXZOZXh0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB2aXNpYmxlL2hpZGRlbiBzdHlsZSBmb3IgdGhlIG5leHRQcmVjIGJ1dHRvblxyXG4gICAgICAgICAgICBwcmV2TmV4dFBhcmVudC5jaGlsZE5vZGVzWyRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmV4dCcpXS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgICAgICBwcmV2TmV4dFBhcmVudC5jaGlsZE5vZGVzWyRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJlYycpXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGFuZ2Ugb3BhY2l0eSBvZiBwcmVjL25leHQgaW1hZ2VcclxuICAgICAgICAgICAgaWYoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JykgKXtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgLnByZWNOZXh0JylbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlY05leHQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWdbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcmVjLWltZycpXS5jbGFzc0xpc3QudG9nZ2xlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICBpbWdbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1uZXh0LWltZycpXS5jbGFzc0xpc3QudG9nZ2xlKCdwcmVjTmV4dCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGNsYXNzIGFjdGl2ZSBmcm9tIGJ1bGxldHMgcHJlYyBmb2N1c1xyXG4gICAgICAgICAgICBjb25zdCBidG5BID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1bGxldHNfbmF2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWxsZXRzX25hdicpO1xyXG4gICAgICAgICAgICBpZiggZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1bGxldHMgLmFjdGl2ZScpICl7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVsbGV0cyAuYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGFzcyBhY3RpdmUgZnJvbSBhY3R1YWwgZm9jdXNcclxuICAgICAgICAgICAgYnRuQVsgJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1mb2N1cycpIF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyIGRpdicpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIElucHV0IEFuaW1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgdmFyIGZBbmltSW5wdXQgPSBmdW5jdGlvbiBmQW5pbUlucHV0KCkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCcpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0Rm9jdXMgPSBmdW5jdGlvbiBnZXRGb2N1cyhvRXZlbnQpIHtcclxuICAgICAgICAgICAgb0V2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgdmFyIG9JbnB1dCA9ICBvRXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhvRXZlbnQpXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIG9JbnB1dC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9LDIwMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIG91dEZvY3VzID0gZnVuY3Rpb24gb3V0Rm9jdXMoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0JykudmFsdWUubGVuZ3RoID09PSAwIHx8IGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCBvcHRpb24nKS52YWx1ZS5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5yZW1vdmUoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLmN1cnJlbnRUYXJnZXQpXHJcbiAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9O1xyXG4gICAgICAgIEFycmF5LmZyb20oaW5wdXQpLmZvckVhY2goZnVuY3Rpb24oJGxhYmVsKSB7XHJcbiAgICAgICAgICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgZ2V0Rm9jdXMpO1xyXG4gICAgICAgICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdldEZvY3VzKTtcclxuICAgICAgICAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIG91dEZvY3VzKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgZkFuaW1JbnB1dCgpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIEJ1dHRvbiBBbmltXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gY29uc3QgYnRuQW5pbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tLWFuaW0nKTtcclxuXHJcbi8vIHZhciBwc2V1ZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1hbmltJyk7XHJcblxyXG4vLyB2YXIgcHNldWRvQmVmb3JlQ29udGVudCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBzZXVkb0J0biwgJzpiZWZvcmUnKS5jb250ZW50OyAvLyBSZXR1cm5zIChzdHJpbmcpIFwiNzBweFwiXHJcbi8vIGZ1bmN0aW9uIGZBZGRDb250ZW50KG8pe1xyXG4vLyAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHNbMF0uYWRkUnVsZSgnLmJ0bi0tYW5pbTo6YmVmb3JlJywgYGNvbnRlbnQ6ICcnYCk7XHJcbi8vICAgICB2YXIgdGV4dCA9IG8udGFyZ2V0LmNoaWxkTm9kZXNbMF0uZGF0YTtcclxuLy8gICAgIGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdLmFkZFJ1bGUoJy5idG4tLWFuaW06OmJlZm9yZScsIGBjb250ZW50OiAnJHt0ZXh0fSdgKTtcclxuLy8gICAgIGNvbnNvbGUubG9nKHRleHQpXHJcbi8vIH1cclxuLy8gICAgICAgICBBcnJheS5mcm9tKGJ0bkFuaW0pLmZvckVhY2goZnVuY3Rpb24oJGJ0bikge1xyXG4vLyAgICAgICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZkFkZENvbnRlbnQpO1xyXG4gICAgICAgIFxyXG4vLyAgICAgICAgIH0pO1xyXG4vLyBmQWRkQ29udGVudCgpO1xyXG4iXX0=
