;(function(){'use strict';var targetDate=new Date("2018/08/19 18:00:00");var days;var hrs;var min;var sec;$(function(){timeToLaunch();numberTransition('#days .number',days,1000,'easeOutQuad');numberTransition('#hours .number',hrs,1000,'easeOutQuad');numberTransition('#minutes .number',min,1000,'easeOutQuad');setTimeout(countDownTimer,1001);});function timeToLaunch(){var currentDate=new Date();var diff=(currentDate-targetDate)/1000;var diff=Math.abs(Math.floor(diff));days=Math.floor(diff/(24*60*60));sec=diff-days*24*60*60;hrs=Math.floor(sec/(60*60));sec=sec-hrs*60*60;min=Math.floor(sec/60);sec=sec-min*60;}function countDownTimer(){timeToLaunch();$("#days .number").text(days);$("#hours .number").text(hrs);$("#minutes .number").text(min);setTimeout(countDownTimer,1000);}function numberTransition(id,endPoint,transitionDuration,transitionEase){$({numberCount:$(id).text()}).animate({numberCount:endPoint},{duration:transitionDuration,easing:transitionEase,step:function step(){$(id).text(Math.floor(this.numberCount));},complete:function complete(){$(id).text(this.numberCount);}});};var myCenter=new google.maps.LatLng(''+lat,''+long);function initialize(){var mapProp={center:myCenter,zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP};var map=new google.maps.Map(document.getElementById("map"),mapProp);var marker=new google.maps.Marker({position:myCenter});marker.setMap(map);}google.maps.event.addDomListener(window,'load',initialize);var hamburger=document.querySelector('.hamburger');var search=document.querySelector('.search-icon');hamburger.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();hamburger.classList.toggle('is-active');document.body.classList.toggle('has-sidebar');});search.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();search.classList.toggle('open');search.parentNode.classList.toggle('open');});var buttons=document.querySelectorAll('.program__navigation a');Array.from(buttons).forEach(function($btn){$btn.addEventListener("click",fActive);});function fActive(e){e.stopPropagation();if(document.querySelector('.active')){document.querySelector('.active').classList.remove('active');}e.currentTarget.classList.add('active');};var fCheckForm=function fCheckForm(){var $Form=document.querySelector('form.contact');var $FirstNameField=document.getElementById('first_name');var $LastNameField=document.getElementById('last_name');var $EmailField=document.getElementById('email');var $MsgField=document.getElementById('message');var $SubmitBtn=document.getElementById('submit');var regexpName=/^[a-zA-Z\u00C0-\u00FF]+['-]?[a-zA-Z\u00C0-\u00FF]+$/;var regexpEmail=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;var regexpMsg=/^([a-zA-Z]{2,40} + [a-zA-Z]{2,40})$/;var fCheckAField=function fCheckAField(field,regexp){if(field.value==''){field.parentNode.querySelector('span').innerHTML="Votre champs de formulaire est vide.";field.parentNode.querySelector('span').classList.add('on');return false;}else if(regexp&&!regexp.test(field.value)){field.parentNode.querySelector('span').innerHTML="Il semble que la valeur rentré ait un problème.";field.parentNode.querySelector('span').classList.add('on');return false;}else{$SubmitBtn.removeAttribute('disabled');field.parentNode.querySelector('span').classList.remove('on');field.parentNode.querySelector('.input').classList.add('ok');return true;}};var fCheckFirstName=function fCheckFirstName(){return fCheckAField($FirstNameField,regexpName);};var fCheckLastName=function fCheckLastName(){return fCheckAField($LastNameField,regexpName);};var fCheckEmail=function fCheckEmail(){return fCheckAField($EmailField,regexpEmail);};var fCheckMessage=function fCheckMessage(){if($MsgField.value.split(/\s+/).length>=3){$MsgField.parentNode.querySelector('span').classList.remove('on');$MsgField.parentNode.querySelector('.input').classList.add('ok');return true;}if($MsgField.value.split(/\s+/).length===1){$MsgField.parentNode.querySelector('span').innerHTML="Vous n'avez pas écrit de message.";$MsgField.parentNode.querySelector('span').classList.add('on');return false;}if($MsgField.value.split(/\s+/).length<5){$MsgField.parentNode.querySelector('span').innerHTML="Vous avez pas écris un assez grand message.";$MsgField.parentNode.querySelector('span').classList.add('on');return false;}};var fCheckAll=function fCheckAll(){if(fCheckFirstName()*fCheckLastName()*fCheckEmail()*fCheckMessage()){$Form.classList.add('valid');}};$FirstNameField.addEventListener('blur',fCheckFirstName,false);$LastNameField.addEventListener('blur',fCheckLastName,false);$EmailField.addEventListener('blur',fCheckEmail,false);$MsgField.addEventListener('blur',fCheckMessage,false);$SubmitBtn.addEventListener('click',fCheckAll,false);};var fCancelAnchor=function fCancelAnchor(e){e.preventDefault();};var bullets=document.querySelectorAll('.bullets_nav');var translateValue;Array.from(bullets).forEach(function($btn){$btn.addEventListener("click",fCancelAnchor);$btn.addEventListener('click',function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$btn.getAttribute('data-translateValue-mobile');}else{var translateValue=$btn.getAttribute('data-translateValue-desktop');}if($btn.parentNode.querySelector('.active')){$btn.parentNode.querySelector('.active').classList.remove('active');}document.querySelector('.slider').style.transform='translateX('+translateValue+')';$btn.classList.add('active');if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$btn.getAttribute('data-prec-img')].classList.toggle('precNext');img[$btn.getAttribute('data-next-img')].classList.toggle('precNext');});});var prevNext=document.querySelectorAll('.prevNext div a');Array.from(prevNext).forEach(function($prevNext){$prevNext.addEventListener("click",fCancelAnchor);$prevNext.addEventListener("click",function(){if(window.matchMedia("(max-width: 739px)").matches){var translateValue=$prevNext.getAttribute('data-translateValue-mobile');}else{var translateValue=$prevNext.getAttribute('data-translateValue-desktop');}console.log(window.matchMedia("(max-width: 739px)").matches);console.log(translateValue);document.querySelector('.slider').style.transform='translateX('+translateValue+')';var prevNextParent=$prevNext.parentNode.parentNode;prevNextParent.childNodes[$prevNext.getAttribute('data-next')].style.visibility='visible';prevNextParent.childNodes[$prevNext.getAttribute('data-prec')].style.visibility='hidden';if(document.querySelectorAll('.slider .precNext')){document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');document.querySelectorAll('.slider .precNext')[0].classList.remove('precNext');}img[$prevNext.getAttribute('data-prec-img')].classList.toggle('precNext');img[$prevNext.getAttribute('data-next-img')].classList.toggle('precNext');var btnA=document.querySelectorAll('.bullets_nav');var btn=document.querySelector('.bullets_nav');if(document.querySelector('.bullets .active')){document.querySelector('.bullets .active').classList.remove('active');}btnA[$prevNext.getAttribute('data-focus')].classList.add('active');});});var img=document.querySelectorAll('.slider div');var fAnimInput=function fAnimInput(){var input=document.querySelectorAll('.input');var getFocus=function getFocus(oEvent){oEvent.currentTarget.parentNode.querySelector('label').classList.add("focus");var oInput=oEvent.currentTarget.parentNode.querySelector('.input');console.log(oEvent);setTimeout(function(){oInput.classList.add("border");},200);};var outFocus=function outFocus(e){if(e.currentTarget.parentNode.querySelector('.input').value.length===0||e.currentTarget.parentNode.querySelector('.input option').value.length===0){e.currentTarget.parentNode.querySelector('label').classList.remove("focus");}console.log(e.currentTarget);e.currentTarget.classList.remove("border");};Array.from(input).forEach(function($label){$label.addEventListener("focus",getFocus);$label.addEventListener("click",getFocus);$label.addEventListener("blur",outFocus);});};fAnimInput();})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJ0YXJnZXREYXRlIiwiRGF0ZSIsImRheXMiLCJocnMiLCJtaW4iLCJzZWMiLCIkIiwidGltZVRvTGF1bmNoIiwibnVtYmVyVHJhbnNpdGlvbiIsInNldFRpbWVvdXQiLCJjb3VudERvd25UaW1lciIsImN1cnJlbnREYXRlIiwiZGlmZiIsIk1hdGgiLCJhYnMiLCJmbG9vciIsInRleHQiLCJpZCIsImVuZFBvaW50IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwidHJhbnNpdGlvbkVhc2UiLCJudW1iZXJDb3VudCIsImFuaW1hdGUiLCJkdXJhdGlvbiIsImVhc2luZyIsInN0ZXAiLCJjb21wbGV0ZSIsIm15Q2VudGVyIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImxhdCIsImxvbmciLCJpbml0aWFsaXplIiwibWFwUHJvcCIsImNlbnRlciIsInpvb20iLCJtYXBUeXBlSWQiLCJNYXBUeXBlSWQiLCJST0FETUFQIiwibWFwIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm1hcmtlciIsIk1hcmtlciIsInBvc2l0aW9uIiwic2V0TWFwIiwiZXZlbnQiLCJhZGREb21MaXN0ZW5lciIsIndpbmRvdyIsImhhbWJ1cmdlciIsInF1ZXJ5U2VsZWN0b3IiLCJzZWFyY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYm9keSIsInBhcmVudE5vZGUiLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCIkYnRuIiwiZkFjdGl2ZSIsInJlbW92ZSIsImN1cnJlbnRUYXJnZXQiLCJhZGQiLCJmQ2hlY2tGb3JtIiwiJEZvcm0iLCIkRmlyc3ROYW1lRmllbGQiLCIkTGFzdE5hbWVGaWVsZCIsIiRFbWFpbEZpZWxkIiwiJE1zZ0ZpZWxkIiwiJFN1Ym1pdEJ0biIsInJlZ2V4cE5hbWUiLCJyZWdleHBFbWFpbCIsInJlZ2V4cE1zZyIsImZDaGVja0FGaWVsZCIsImZpZWxkIiwicmVnZXhwIiwidmFsdWUiLCJpbm5lckhUTUwiLCJ0ZXN0IiwicmVtb3ZlQXR0cmlidXRlIiwiZkNoZWNrRmlyc3ROYW1lIiwiZkNoZWNrTGFzdE5hbWUiLCJmQ2hlY2tFbWFpbCIsImZDaGVja01lc3NhZ2UiLCJzcGxpdCIsImxlbmd0aCIsImZDaGVja0FsbCIsImZDYW5jZWxBbmNob3IiLCJidWxsZXRzIiwidHJhbnNsYXRlVmFsdWUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImdldEF0dHJpYnV0ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaW1nIiwicHJldk5leHQiLCIkcHJldk5leHQiLCJjb25zb2xlIiwibG9nIiwicHJldk5leHRQYXJlbnQiLCJjaGlsZE5vZGVzIiwidmlzaWJpbGl0eSIsImJ0bkEiLCJidG4iLCJmQW5pbUlucHV0IiwiaW5wdXQiLCJnZXRGb2N1cyIsIm9FdmVudCIsIm9JbnB1dCIsIm91dEZvY3VzIiwiJGxhYmVsIl0sIm1hcHBpbmdzIjoiMEJBR0ksR0FBSUEsWUFBYSxHQUFJQyxLQUFKLENBQVMscUJBQVQsQ0FBakIsQ0FHQSxHQUFJQyxLQUFKLENBQ0EsR0FBSUMsSUFBSixDQUNBLEdBQUlDLElBQUosQ0FDQSxHQUFJQyxJQUFKLENBS0FDLEVBQUUsVUFBVyxDQUVUQyxlQUVBQyxpQkFBaUIsZUFBakIsQ0FBa0NOLElBQWxDLENBQXdDLElBQXhDLENBQThDLGFBQTlDLEVBQ0FNLGlCQUFpQixnQkFBakIsQ0FBbUNMLEdBQW5DLENBQXdDLElBQXhDLENBQThDLGFBQTlDLEVBQ0FLLGlCQUFpQixrQkFBakIsQ0FBcUNKLEdBQXJDLENBQTBDLElBQTFDLENBQWdELGFBQWhELEVBRUFLLFdBQVdDLGNBQVgsQ0FBMEIsSUFBMUIsRUFDSCxDQVRELEVBZUEsUUFBU0gsYUFBVCxFQUF1QixDQUVuQixHQUFJSSxhQUFjLEdBQUlWLEtBQUosRUFBbEIsQ0FHQSxHQUFJVyxNQUFPLENB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QVNBLFNBQVQsQ0FBa0JoRSxDQUFsQixDQUFxQixDQUNoQyxHQUFJQSxFQUFFZSxhQUFGLENBQWdCVCxVQUFoQixDQUEyQlQsYUFBM0IsQ0FBeUMsUUFBekMsRUFBbURpQyxLQUFuRCxDQUF5RFMsTUFBekQsR0FBb0UsQ0FBcEUsRUFBeUV2QyxFQUFFZSxhQUFGLENBQWdCVCxVQUFoQixDQUEyQlQsYUFBM0IsQ0FBeUMsZUFBekMsRUFBMERpQyxLQUExRCxDQUFnRVMsTUFBaEUsR0FBMkUsQ0FBeEosQ0FBNEosQ0FDeEp2QyxFQUFFZSxhQUFGLENBQWdCVCxVQUFoQixDQUEyQlQsYUFBM0IsQ0FBeUMsT0FBekMsRUFBa0RNLFNBQWxELENBQTREVyxNQUE1RCxDQUFtRSxPQUFuRSxFQUNILENBQ0RzQyxRQUFRQyxHQUFSLENBQVlyRCxFQUFFZSxhQUFkLEVBQ0FmLEVBQUVlLGFBQUYsQ0FBZ0JaLFNBQWhCLENBQTBCVyxNQUExQixDQUFpQyxRQUFqQyxFQUVILENBUEQsQ0FRQUwsTUFBTUMsSUFBTixDQUFXa0QsS0FBWCxFQUFrQmpELE9BQWxCLENBQTBCLFNBQVNzRCxNQUFULENBQWlCLENBQ3ZDQSxPQUFPbEUsZ0JBQVAsQ0FBd0IsT0FBeEIsQ0FBaUM4RCxRQUFqQyxFQUNBSSxPQUFPbEUsZ0JBQVAsQ0FBd0IsT0FBeEIsQ0FBaUM4RCxRQUFqQyxFQUNBSSxPQUFPbEUsZ0JBQVAsQ0FBd0IsTUFBeEIsQ0FBZ0NpRSxRQUFoQyxFQUVILENBTEQsRUFNSCxDQTlCRCxDQStCQUwsYSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3VudGRvd24gaG9tZSBwYWdlXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gVGhlIGRhdGUgeW91IHdhbnQgdG8gY291bnQgZG93biB0b1xyXG4gICAgdmFyIHRhcmdldERhdGUgPSBuZXcgRGF0ZShcIjIwMTgvMDgvMTkgMTg6MDA6MDBcIik7ICAgXHJcblxyXG4gICAgLy8gT3RoZXIgZGF0ZSByZWxhdGVkIHZhcmlhYmxlc1xyXG4gICAgdmFyIGRheXM7XHJcbiAgICB2YXIgaHJzO1xyXG4gICAgdmFyIG1pbjtcclxuICAgIHZhciBzZWM7XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogT04gRE9DVU1FTlQgTE9BRFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGltZSB1bnRpbCBsYXVuY2ggZGF0ZVxyXG4gICAgICAgIHRpbWVUb0xhdW5jaCgpO1xyXG4gICAgICAgIC8vIFRyYW5zaXRpb24gdGhlIGN1cnJlbnQgY291bnRkb3duIGZyb20gMCBcclxuICAgICAgICBudW1iZXJUcmFuc2l0aW9uKCcjZGF5cyAubnVtYmVyJywgZGF5cywgMTAwMCwgJ2Vhc2VPdXRRdWFkJyk7XHJcbiAgICAgICAgbnVtYmVyVHJhbnNpdGlvbignI2hvdXJzIC5udW1iZXInLCBocnMsIDEwMDAsICdlYXNlT3V0UXVhZCcpO1xyXG4gICAgICAgIG51bWJlclRyYW5zaXRpb24oJyNtaW51dGVzIC5udW1iZXInLCBtaW4sIDEwMDAsICdlYXNlT3V0UXVhZCcpO1xyXG4gICAgICAgIC8vIEJlZ2luIENvdW50ZG93blxyXG4gICAgICAgIHNldFRpbWVvdXQoY291bnREb3duVGltZXIsMTAwMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgKiBGSUdVUkUgT1VUIFRIRSBBTU9VTlQgT0YgXHJcbiAgICBUSU1FIExFRlQgQkVGT1JFIExBVU5DSFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZnVuY3Rpb24gdGltZVRvTGF1bmNoKCl7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IGRhdGVcclxuICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAvLyBGaW5kIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gZGF0ZXNcclxuICAgICAgICB2YXIgZGlmZiA9IChjdXJyZW50RGF0ZSAtIHRhcmdldERhdGUpLzEwMDA7XHJcbiAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmFicyhNYXRoLmZsb29yKGRpZmYpKTsgIFxyXG5cclxuICAgICAgICAvLyBDaGVjayBudW1iZXIgb2YgZGF5cyB1bnRpbCB0YXJnZXRcclxuICAgICAgICBkYXlzID0gTWF0aC5mbG9vcihkaWZmLygyNCo2MCo2MCkpO1xyXG4gICAgICAgIHNlYyA9IGRpZmYgLSBkYXlzICogMjQqNjAqNjA7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG51bWJlciBvZiBob3VycyB1bnRpbCB0YXJnZXRcclxuICAgICAgICBocnMgPSBNYXRoLmZsb29yKHNlYy8oNjAqNjApKTtcclxuICAgICAgICBzZWMgPSBzZWMgLSBocnMgKiA2MCo2MDtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgbnVtYmVyIG9mIG1pbnV0ZXMgdW50aWwgdGFyZ2V0XHJcbiAgICAgICAgbWluID0gTWF0aC5mbG9vcihzZWMvKDYwKSk7XHJcbiAgICAgICAgc2VjID0gc2VjIC0gbWluICogNjA7XHJcbiAgICB9XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogRElTUExBWSBUSEUgQ1VSUkVOVCBcclxuICAgIENPVU5UIFRPIExBVU5DSFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZnVuY3Rpb24gY291bnREb3duVGltZXIoKXsgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgdGltZSB0byBsYXVuY2hcclxuICAgICAgICB0aW1lVG9MYXVuY2goKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBXcml0ZSB0byBjb3VudGRvd24gY29tcG9uZW50XHJcbiAgICAgICAgJCggXCIjZGF5cyAubnVtYmVyXCIgKS50ZXh0KGRheXMpO1xyXG4gICAgICAgICQoIFwiI2hvdXJzIC5udW1iZXJcIiApLnRleHQoaHJzKTtcclxuICAgICAgICAkKCBcIiNtaW51dGVzIC5udW1iZXJcIiApLnRleHQobWluKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZXBlYXQgdGhlIGNoZWNrIGV2ZXJ5IHNlY29uZFxyXG4gICAgICAgIHNldFRpbWVvdXQoY291bnREb3duVGltZXIsMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICogVFJBTlNJVElPTiBOVU1CRVJTIEZST00gMFxyXG4gICAgVE8gQ1VSUkVOVCBUSU1FIFVOVElMIExBVU5DSFxyXG4gICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZnVuY3Rpb24gbnVtYmVyVHJhbnNpdGlvbihpZCwgZW5kUG9pbnQsIHRyYW5zaXRpb25EdXJhdGlvbiwgdHJhbnNpdGlvbkVhc2Upe1xyXG4gICAgICAgIC8vIFRyYW5zaXRpb24gbnVtYmVycyBmcm9tIDAgdG8gdGhlIGZpbmFsIG51bWJlclxyXG4gICAgICAgICQoe251bWJlckNvdW50OiAkKGlkKS50ZXh0KCl9KS5hbmltYXRlKHtudW1iZXJDb3VudDogZW5kUG9pbnR9LCB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0cmFuc2l0aW9uRHVyYXRpb24sXHJcbiAgICAgICAgICAgIGVhc2luZzp0cmFuc2l0aW9uRWFzZSxcclxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKGlkKS50ZXh0KE1hdGguZmxvb3IodGhpcy5udW1iZXJDb3VudCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKGlkKS50ZXh0KHRoaXMubnVtYmVyQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7IFxyXG4gICAgfTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBHb29nbGUgbWFwIGluZGl2aWR1YWxcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgdmFyIG15Q2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhgJHtsYXR9YCwgYCR7bG9uZ31gKTtcclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdmFyIG1hcFByb3AgPSB7XHJcbiAgICAgICAgICAgIGNlbnRlcjogbXlDZW50ZXIsXHJcbiAgICAgICAgICAgIHpvb206IDEwLFxyXG4gICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKSwgbWFwUHJvcCk7XHJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbXlDZW50ZXIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFya2VyLnNldE1hcChtYXApO1xyXG4gICAgfVxyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsIGluaXRpYWxpemUpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIEhhbWJ1cmdlciBtZW51IGFuZCBzaWRlYmFyXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgIGNvbnN0IGhhbWJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXInKTtcclxuICAgIGNvbnN0IHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaWNvbicpXHJcblxyXG4gICAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBoYW1idXJnZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJylcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1zaWRlYmFyJylcclxuICAgIH0pO1xyXG5cclxuICAgIHNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgc2VhcmNoLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKVxyXG4gICAgICAgIHNlYXJjaC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICAgIH0pO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIEV2ZW50IG1lbnVcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9ncmFtX19uYXZpZ2F0aW9uIGEnKTtcclxuXHJcbiAgICBBcnJheS5mcm9tKGJ1dHRvbnMpLmZvckVhY2goZnVuY3Rpb24oJGJ0bikge1xyXG4gICAgICAgICRidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZBY3RpdmUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZkFjdGl2ZShlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiggIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKSApe1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIH07XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gRm9ybSBjb250YWN0IGZlZWRiYWNrIGFuZCBmb2N1c1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICB2YXIgZkNoZWNrRm9ybSA9IGZ1bmN0aW9uIGZDaGVja0Zvcm0oKSB7XHJcbiAgICAgICAgdmFyICRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybS5jb250YWN0Jyk7XHJcbiAgICAgICAgdmFyICRGaXJzdE5hbWVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJzdF9uYW1lJyk7XHJcbiAgICAgICAgdmFyICRMYXN0TmFtZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZScpO1xyXG4gICAgICAgIHZhciAkRW1haWxGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpO1xyXG4gICAgICAgIHZhciAkTXNnRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpO1xyXG4gICAgICAgIHZhciAkU3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdCcpO1xyXG4gICAgICAgIHZhciByZWdleHBOYW1lID0gL15bYS16QS1aXFx1MDBDMC1cXHUwMEZGXStbJy1dP1thLXpBLVpcXHUwMEMwLVxcdTAwRkZdKyQvO1xyXG4gICAgICAgIHZhciByZWdleHBFbWFpbCA9IC9eKFthLXowLTlfXFwuLV0rKUAoW1xcZGEtelxcLi1dKylcXC4oW2EtelxcLl17Miw2fSkkLztcclxuICAgICAgICB2YXIgcmVnZXhwTXNnID0gL14oW2EtekEtWl17Miw0MH0gKyBbYS16QS1aXXsyLDQwfSkkLztcclxuICAgICAgICB2YXIgZkNoZWNrQUZpZWxkID0gZnVuY3Rpb24gZkNoZWNrQUZpZWxkKGZpZWxkLCByZWdleHApIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdHJlIGNoYW1wcyBkZSBmb3JtdWxhaXJlIGVzdCB2aWRlLlwiO1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LmFkZCgnb24nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWdleHAgJiYgIXJlZ2V4cC50ZXN0KGZpZWxkLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gXCJJbCBzZW1ibGUgcXVlIGxhIHZhbGV1ciByZW50csOpIGFpdCB1biBwcm9ibMOobWUuXCI7XHJcbiAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJFN1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBmaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpO1xyXG4gICAgICAgICAgICAgICAgZmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdvaycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBmQ2hlY2tGaXJzdE5hbWUgPSBmdW5jdGlvbiBmQ2hlY2tGaXJzdE5hbWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmQ2hlY2tBRmllbGQoJEZpcnN0TmFtZUZpZWxkLCByZWdleHBOYW1lKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBmQ2hlY2tMYXN0TmFtZSA9IGZ1bmN0aW9uIGZDaGVja0xhc3ROYW1lKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZkNoZWNrQUZpZWxkKCRMYXN0TmFtZUZpZWxkLCByZWdleHBOYW1lKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBmQ2hlY2tFbWFpbCA9IGZ1bmN0aW9uIGZDaGVja0VtYWlsKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZkNoZWNrQUZpZWxkKCRFbWFpbEZpZWxkLCByZWdleHBFbWFpbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZkNoZWNrTWVzc2FnZSA9IGZ1bmN0aW9uIGZDaGVja01lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIGlmICgkTXNnRmllbGQudmFsdWUuc3BsaXQoL1xccysvKS5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdvaycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRNc2dGaWVsZC52YWx1ZS5zcGxpdCgvXFxzKy8pLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCA9IFwiVm91cyBuJ2F2ZXogcGFzIMOpY3JpdCBkZSBtZXNzYWdlLlwiO1xyXG4gICAgICAgICAgICAgICAgJE1zZ0ZpZWxkLnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsYXNzTGlzdC5hZGQoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRNc2dGaWVsZC52YWx1ZS5zcGxpdCgvXFxzKy8pLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgICAgICRNc2dGaWVsZC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBcIlZvdXMgYXZleiBwYXMgw6ljcmlzIHVuIGFzc2V6IGdyYW5kIG1lc3NhZ2UuXCI7XHJcbiAgICAgICAgICAgICAgICAkTXNnRmllbGQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xhc3NMaXN0LmFkZCgnb24nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGZDaGVja0FsbCA9IGZ1bmN0aW9uIGZDaGVja0FsbCgpIHtcclxuICAgICAgICAgICAgaWYgKGZDaGVja0ZpcnN0TmFtZSgpICogZkNoZWNrTGFzdE5hbWUoKSAqIGZDaGVja0VtYWlsKCkgKiBmQ2hlY2tNZXNzYWdlKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAkRm9ybS5jbGFzc0xpc3QuYWRkKCd2YWxpZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJEZpcnN0TmFtZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmQ2hlY2tGaXJzdE5hbWUsIGZhbHNlKTtcclxuICAgICAgICAkTGFzdE5hbWVGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZkNoZWNrTGFzdE5hbWUsIGZhbHNlKTtcclxuICAgICAgICAkRW1haWxGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZkNoZWNrRW1haWwsIGZhbHNlKTtcclxuICAgICAgICAkTXNnRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZDaGVja01lc3NhZ2UsIGZhbHNlKTtcclxuICAgICAgICAkU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZkNoZWNrQWxsLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCcpO1xyXG5cclxuICAgICAgICAvLyB2YXIgZ2V0Rm9jdXMgPSBmdW5jdGlvbiBnZXRGb2N1cyhvRXZlbnQpIHtcclxuICAgICAgICAvLyAgICAgb0V2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKTtcclxuICAgICAgICAvLyAgICAgdmFyIG9JbnB1dCA9ICBvRXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xyXG4gICAgICAgIC8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygpXHJcbiAgICAgICAgLy8gICAgICAgICBvSW5wdXQuY2xhc3NMaXN0LmFkZChcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgfSwyMDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyB9O1xyXG5cclxuICAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIHZhciBvdXRGb2N1cyA9IGZ1bmN0aW9uIG91dEZvY3VzKGUpIHtcclxuICAgICAgICAvLyAgICAgaWYgKGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpLnZhbHVlLmxlbmd0aCA9PT0gMCB8fCBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQgb3B0aW9uJykudmFsdWUubGVuZ3RoID09PSAwICkge1xyXG4gICAgICAgIC8vICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignbGFiZWwnKS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9jdXNcIik7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZS5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAgIC8vICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlclwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgICAvLyBBcnJheS5mcm9tKGlucHV0KS5mb3JFYWNoKGZ1bmN0aW9uKCRsYWJlbCkge1xyXG4gICAgICAgIC8vICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGdldEZvY3VzKTtcclxuICAgICAgICAvLyAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRGb2N1cyk7XHJcbiAgICAgICAgLy8gICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvdXRGb2N1cyk7XHJcblxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfTtcclxuICAgIC8vZkNoZWNrRm9ybSgpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8vIEpTIFNsaWRlclxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cclxuICAgIGNvbnN0IGZDYW5jZWxBbmNob3IgPSBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYnVsbGV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWxsZXRzX25hdicpO1xyXG4gICAgdmFyIHRyYW5zbGF0ZVZhbHVlO1xyXG4gICAgQXJyYXkuZnJvbShidWxsZXRzKS5mb3JFYWNoKGZ1bmN0aW9uKCRidG4pIHtcclxuICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQ2FuY2VsQW5jaG9yKTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XHJcblxyXG4gICAgICAgICAgICBpZiggd2luZG93Lm1hdGNoTWVkaWEoIFwiKG1heC13aWR0aDogNzM5cHgpXCIgKS5tYXRjaGVzICl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsdWUgPSAkYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGVWYWx1ZS1tb2JpbGUnKTtcclxuICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVZhbHVlID0gJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtZGVza3RvcCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzcyBhY3RpdmUgZnJvbSBwcmVjIGZvY3VzXHJcbiAgICAgICAgICAgIGlmKCAkYnRuLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpICl7XHJcbiAgICAgICAgICAgICAgICAkYnRuLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHRyYW5zbGF0ZVggYW5pbWF0aW9uIG9mIHNsaWRlclxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyJykuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0cmFuc2xhdGVWYWx1ZX0pYDtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGFzcyBhY3RpdmUgZnJvbSBhY3R1YWwgZm9jdXNcclxuICAgICAgICAgICAgJGJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBvcGFjaXR5IG9mIHByZWMvbmV4dCBpbWFnZVxyXG4gICAgICAgICAgICBpZiggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKSApe1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltZ1skYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1wcmVjLWltZycpXS5jbGFzc0xpc3QudG9nZ2xlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICBpbWdbJGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmV4dC1pbWcnKV0uY2xhc3NMaXN0LnRvZ2dsZSgncHJlY05leHQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCBwcmV2TmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmV2TmV4dCBkaXYgYScpO1xyXG5cclxuICAgIEFycmF5LmZyb20ocHJldk5leHQpLmZvckVhY2goZnVuY3Rpb24oJHByZXZOZXh0KSB7XHJcbiAgICAgICAgJHByZXZOZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmQ2FuY2VsQW5jaG9yKTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAkcHJldk5leHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIHdpbmRvdy5tYXRjaE1lZGlhKCBcIihtYXgtd2lkdGg6IDczOXB4KVwiICkubWF0Y2hlcyApe1xyXG4gICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtbW9iaWxlJyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9ICRwcmV2TmV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHJhbnNsYXRlVmFsdWUtZGVza3RvcCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2cod2luZG93Lm1hdGNoTWVkaWEoIFwiKG1heC13aWR0aDogNzM5cHgpXCIgKS5tYXRjaGVzICk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zbGF0ZVZhbHVlKTtcclxuICAgICAgICAgICAgLy8gTWFrZSB0cmFuc2xhdGVYIGFuaW1hdGlvbiBvZiBzbGlkZXJcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dHJhbnNsYXRlVmFsdWV9KWA7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdmFyaWFibGUgZm9yIHRoZSBwYXJlbnRcclxuICAgICAgICAgICAgY29uc3QgcHJldk5leHRQYXJlbnQgPSAkcHJldk5leHQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHZpc2libGUvaGlkZGVuIHN0eWxlIGZvciB0aGUgbmV4dFByZWMgYnV0dG9uXHJcbiAgICAgICAgICAgIHByZXZOZXh0UGFyZW50LmNoaWxkTm9kZXNbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1uZXh0JyldLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgIHByZXZOZXh0UGFyZW50LmNoaWxkTm9kZXNbJHByZXZOZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1wcmVjJyldLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBvcGFjaXR5IG9mIHByZWMvbmV4dCBpbWFnZVxyXG4gICAgICAgICAgICBpZiggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKSApe1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlciAucHJlY05leHQnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVjTmV4dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltZ1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXByZWMtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcbiAgICAgICAgICAgIGltZ1skcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLW5leHQtaW1nJyldLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWNOZXh0Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY2xhc3MgYWN0aXZlIGZyb20gYnVsbGV0cyBwcmVjIGZvY3VzXHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bkEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnVsbGV0c19uYXYnKTtcclxuICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1bGxldHNfbmF2Jyk7XHJcbiAgICAgICAgICAgIGlmKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVsbGV0cyAuYWN0aXZlJykgKXtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWxsZXRzIC5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGNsYXNzIGFjdGl2ZSBmcm9tIGFjdHVhbCBmb2N1c1xyXG4gICAgICAgICAgICBidG5BWyAkcHJldk5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLWZvY3VzJykgXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXIgZGl2Jyk7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gSW5wdXQgQW5pbVxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICB2YXIgZkFuaW1JbnB1dCA9IGZ1bmN0aW9uIGZBbmltSW5wdXQoKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0Jyk7XHJcblxyXG4gICAgICAgIHZhciBnZXRGb2N1cyA9IGZ1bmN0aW9uIGdldEZvY3VzKG9FdmVudCkge1xyXG4gICAgICAgICAgICBvRXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuY2xhc3NMaXN0LmFkZChcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICB2YXIgb0lucHV0ID0gIG9FdmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0Jyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG9FdmVudClcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgb0lucHV0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXJcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0sMjAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgb3V0Rm9jdXMgPSBmdW5jdGlvbiBvdXRGb2N1cyhlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS52YWx1ZS5sZW5ndGggPT09IDAgfHwgZS5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0IG9wdGlvbicpLnZhbHVlLmxlbmd0aCA9PT0gMCApIHtcclxuICAgICAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuY2xhc3NMaXN0LnJlbW92ZShcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUuY3VycmVudFRhcmdldClcclxuICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXJcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgQXJyYXkuZnJvbShpbnB1dCkuZm9yRWFjaChmdW5jdGlvbigkbGFiZWwpIHtcclxuICAgICAgICAgICAgJGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBnZXRGb2N1cyk7XHJcbiAgICAgICAgICAgICRsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ2V0Rm9jdXMpO1xyXG4gICAgICAgICAgICAkbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb3V0Rm9jdXMpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmQW5pbUlucHV0KCk7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gQnV0dG9uIEFuaW1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vLyBjb25zdCBidG5BbmltID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi0tYW5pbScpO1xyXG5cclxuLy8gdmFyIHBzZXVkb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tLWFuaW0nKTtcclxuXHJcbi8vIHZhciBwc2V1ZG9CZWZvcmVDb250ZW50ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocHNldWRvQnRuLCAnOmJlZm9yZScpLmNvbnRlbnQ7IC8vIFJldHVybnMgKHN0cmluZykgXCI3MHB4XCJcclxuLy8gZnVuY3Rpb24gZkFkZENvbnRlbnQobyl7XHJcbi8vICAgICBkb2N1bWVudC5zdHlsZVNoZWV0c1swXS5hZGRSdWxlKCcuYnRuLS1hbmltOjpiZWZvcmUnLCBgY29udGVudDogJydgKTtcclxuLy8gICAgIHZhciB0ZXh0ID0gby50YXJnZXQuY2hpbGROb2Rlc1swXS5kYXRhO1xyXG4vLyAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHNbMF0uYWRkUnVsZSgnLmJ0bi0tYW5pbTo6YmVmb3JlJywgYGNvbnRlbnQ6ICcke3RleHR9J2ApO1xyXG4vLyAgICAgY29uc29sZS5sb2codGV4dClcclxuLy8gfVxyXG4vLyAgICAgICAgIEFycmF5LmZyb20oYnRuQW5pbSkuZm9yRWFjaChmdW5jdGlvbigkYnRuKSB7XHJcbi8vICAgICAgICAgICAgICRidG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBmQWRkQ29udGVudCk7XHJcbiAgICAgICAgXHJcbi8vICAgICAgICAgfSk7XHJcbi8vIGZBZGRDb250ZW50KCk7XHJcbiJdfQ==
